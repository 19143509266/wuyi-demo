(self.webpackChunk=self.webpackChunk||[]).push([[809],{44046:function(z,T,f){"use strict";f.r(T),f.d(T,{default:function(){return me}});var G=f(48305),D=f.n(G),v=f(75271),J=f(15558),O=f.n(J),u={"big-box":"big-box___wVSaO","panel-edit":"panel-edit___cWnaq",shadow:"shadow___I_0Tf",slider:"slider___r7ptW",item:"item___SUTOR",outline:"outline___rbK8E",handle:"handle___qRG5L","handle-tl":"handle-tl___sffw5","handle-br":"handle-br___BSkNJ","handle-tr":"handle-tr___CzmFz","handle-bl":"handle-bl___nU3RM","handle-tm":"handle-tm___WwvPV","handle-bm":"handle-bm___eV31S","handle-ml":"handle-ml___uJsin","handle-mr":"handle-mr___d3pT0",move:"move___ZHHyo","move-top":"move-top___mDDB7","move-bottom":"move-bottom___wXKfG","move-left":"move-left____2vSL","move-right":"move-right___zQKPU"},h={x:36,y:18},_={width:1600,height:900},K=260,re=["tl","tm","tr","ml","mr","bl","bm","br"],Q=f(59739),$=f(26068),o=f.n($),c=function(a,e,t){if(a==="x")return e*t.x/h.x*_.width;if(a==="y")return e*t.y/h.y*_.height},k=function(a,e,t){return a==="x"?e/t.x/_.width*h.x:a==="y"?e/t.y/_.height*h.y:0},H=function(a,e){return a.x<e.x+e.sizeX&&a.x+a.sizeX>e.x&&a.y<e.y+e.sizeY&&a.y+a.sizeY>e.y},Z=function(a,e){var t=!1;return e(function(i){var n=F(i,a);n.x=Math.min(Math.max(n.x,0),h.x-(n.sizeX||0)),n.y=Math.max(n.y,0);var s=i.map(function(r){if(r.id!==n.id&&H(n,r)){t=!0;var d=r.y;return n.y<=r.y&&(d+=n.sizeY-r.y),o()(o()({},r),{},{y:d})}return r});return s}),t},q=function(a,e,t){e(function(i){return i.map(function(n){var s=n;if(n.y>0){var r=F(i,n);s=r}return n.id===(a==null?void 0:a.id)&&!t?a:s})})},F=function(a,e){var t=a.filter(function(i){return i.y<e.y&&i.x<e.x+e.sizeX&&i.x+i.sizeX>e.x&&i.id!==e.id}).reduce(function(i,n){return i===null||n.y>i.y?n:i},null);return t?t.x+t.sizeX<=e.x||e.x+e.sizeX<=t.x?o()(o()({},e),{},{y:t.y}):e.y<t.y+t.sizeY?o()(o()({},e),{},{y:e.y-t.sizeY}):o()(o()({},e),{},{y:t.y+t.sizeY}):o()(o()({},e),{},{y:0})},ie=function(a,e,t,i,n,s){var r=(0,v.useRef)(a);r.current=a;var d=null,m=(0,v.useCallback)(function(x,M){var b,w,y,C,j=x.clientX,R=x.clientY,P=((b=r.current)===null||b===void 0?void 0:b.sizeX)||0,X=((w=r.current)===null||w===void 0?void 0:w.sizeY)||0,l=((y=r.current)===null||y===void 0?void 0:y.x)||0,S=((C=r.current)===null||C===void 0?void 0:C.y)||0,g=function(p){if(r.current){var E=Math.round(k("x",p.clientX-j,n)),U=Math.round(k("y",p.clientY-R,n)),L=P,N=X,V=l,B=S;switch(M){case"tl":L=P-E,N=X-U,V=l+E,B=S+U;break;case"tm":N=X-U,B=S+U;break;case"tr":L=P+E,N=X-U,B=S+U;break;case"ml":L=P-E,V=l+E;break;case"mr":L=P+E;break;case"bl":L=P-E,N=X+U,V=l+E;break;case"bm":N=X+U;break;case"br":L=P+E,N=X+U;break;default:break}if(V+L>h.x){var ee,ne;V=h.x-(((ee=r.current)===null||ee===void 0?void 0:ee.sizeX)||0),L=((ne=r.current)===null||ne===void 0?void 0:ne.sizeX)||0}if(V<0){var ae;V=0,L=((ae=r.current)===null||ae===void 0?void 0:ae.sizeX)||0}if(B<0){var te;B=0,N=((te=r.current)===null||te===void 0?void 0:te.sizeY)||0}var we=o()(o()({},r.current),{},{sizeX:L,sizeY:N,x:V,y:B});d=we,s(o()(o()({},d),{},{type:"drag"}));var ze=Z(d,i);ze||(e(d),q(r.current,i,!1))}},W=function A(){if(s({x:0,y:0,sizeX:0,sizeY:0,type:"new"}),d){var p=F(t,d);p.x=Math.min(Math.max(p.x,0),h.x-(p.sizeX||0)),p.y=Math.max(p.y,0),e(p),i(function(E){return E.map(function(U){return U.id===(p==null?void 0:p.id)?p:U})})}window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",A)};window.addEventListener("mousemove",g),window.addEventListener("mouseup",W)},[a,e,t,i,n]);return{handleResizeMouseDown:m}},oe=function(a,e,t,i,n,s){var r=(0,v.useRef)(a);r.current=a;var d=null,m=(0,v.useCallback)(function(x){var M,b,w=x.clientX,y=x.clientY,C=((M=r.current)===null||M===void 0?void 0:M.x)||0,j=((b=r.current)===null||b===void 0?void 0:b.y)||0,R=function(l){var S;if(r.current){var g=Math.round(k("x",l.clientX-w,n)),W=Math.round(k("y",l.clientY-y,n)),A=C+g,p=j+W;A=Math.min(Math.max(A,0),h.x-(((S=r.current)===null||S===void 0?void 0:S.sizeX)||0)),p=Math.max(p,0);var E=o()(o()({},r.current),{},{x:A,y:p});d=E,s(o()(o()({},d),{},{type:"drag"}));var U=Z(d,i);U||(e(d),q(r.current,i,!1))}},P=function X(){if(s({x:0,y:0,sizeX:0,sizeY:0,type:"new"}),d){var l=F(t,d);l.x=Math.min(Math.max(l.x,0),h.x-(l.sizeX||0)),l.y=Math.max(l.y,0),e(l),i(function(S){return S.map(function(g){return g.id===(l==null?void 0:l.id)?l:g})})}window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",X)};window.addEventListener("mousemove",R),window.addEventListener("mouseup",P)},[a,e,t,i,n]);return{handleMoveMouseDown:m}},se=function(a,e,t,i){var n=(0,v.useState)(0),s=D()(n,2),r=s[0],d=s[1],m=(0,v.useState)(0),x=D()(m,2),M=x[0],b=x[1],w=(0,v.useState)(1),y=D()(w,2),C=y[0],j=y[1],R=(0,v.useState)(1),P=D()(R,2),X=P[0],l=P[1];return(0,v.useEffect)(function(){var S=_.width,g=_.height,W=Math.round((a-K)/(S/h.x)),A=Math.round(e/(g/h.y)),p=Math.round(t/S*h.x),E=Math.round(i/g*h.y);d(W),b(A),j(p),l(E)},[a,e,t,i]),{matrixX:r,matrixY:M,sizeX:C,sizeY:X}},Y=f(52676),ue=function(a){var e=a.setShadowPosition,t=a.setComponentData,i=200,n=150,s=(0,v.useState)({x:0,y:0}),r=D()(s,2),d=r[0],m=r[1],x=se(d.x,d.y,i,n),M=x.matrixX,b=x.matrixY,w=x.sizeX,y=x.sizeY,C=_.width/h.x,j=_.height/h.y,R=function(l){var S=l.clientX,g=l.clientY;S>0&&g>0&&m({x:S,y:g});var W=Math.round((S-K)/C),A=Math.round(g/j);e({x:W,y:A,sizeX:5,sizeY:3,type:"new"})},P=function(){var l=d.x,S=d.y;if(l>K&&S>0){var g={id:(0,Q.Z)(),x:M,y:b,sizeX:w,sizeY:y};t(function(W){return[].concat(O()(W),[g])}),q(g,t,!0)}};return(0,Y.jsx)("div",{className:u.slider,style:{width:K},children:Array.from({length:3}).map(function(X,l){return(0,Y.jsxs)("div",{className:u.item,draggable:!0,onDrag:R,onDragEnd:P,children:["item",l+1]},l)})})},de=ue,le=function(a){var e=a.componentData,t=a.setComponentData,i=a.curComponent,n=a.setCurComponent,s=a.scale,r=a.setShadowPosition,d=ie(i,n,e,t,s,r),m=d.handleResizeMouseDown,x=oe(i,n,e,t,s,r),M=x.handleMoveMouseDown,b=function(y){n(y)};return(0,Y.jsx)("div",{style:{width:"100%",height:"100%",userSelect:"none"},children:e.map(function(w){return(0,Y.jsxs)("div",{style:{width:c("x",w.sizeX,s),height:c("y",w.sizeY,s),background:"#fff000",transform:"translate(".concat(c("x",w.x,s),"px, ").concat(c("y",w.y,s),"px)"),position:"absolute",zIndex:999},onClick:function(){return b(w)},children:[w.id,i&&i.id===w.id?(0,Y.jsxs)("div",{className:u.outline,children:[re.map(function(y){return(0,Y.jsx)("div",{className:"".concat(u.handle," ").concat(u["handle-".concat(y)]),onMouseDown:function(j){return m(j,y)}},y)}),["top","bottom","left","right"].map(function(y){return(0,Y.jsx)("div",{className:"".concat(u.move," ").concat(u["move-".concat(y)]),onMouseDown:function(j){return M(j)}},y)})]}):null]},w.id)})})},ve=le,ce=function(a){var e=a.shadowPosition,t=a.scale,i=a.componentData;if(e.x<0||e.y<0||e.x===0&&e.y===0)return null;var n=_.width/h.x,s=_.height/h.y,r=(0,v.useMemo)(function(){var d={id:"shadow",x:e.x,y:e.y,sizeX:e.sizeX,sizeY:e.sizeY},m=F(i,d);m.x=Math.min(Math.max(m.x,0),h.x-(m.sizeX||0)),m.y=Math.max(m.y,0);var x=m.x*n,M=m.y*s,b=m.sizeX*n,w=m.sizeY*s,y={transform:"translate(".concat(x*t.x,"px, ").concat(M*t.y,"px) rotate(0deg)"),width:b*t.x,height:w*t.y,transition:"0.1s",zIndex:10};return y},[e,n,s]);return(0,Y.jsx)("div",{className:u.shadow,style:r})},he=ce,xe=function(a){var e=a.scale,t=(0,v.useRef)(null);return(0,v.useEffect)(function(){var i=t.current;if(i){var n=i.getContext("2d");if(n){var s=_.width,r=_.height;i.width=s*e.x,i.height=r*e.y,n.strokeStyle="#e0e0e0",n.lineWidth=1;for(var d=s/h.x,m=r/h.y,x=0;x<=h.x;x++)n.beginPath(),n.moveTo(x*d*e.x,0),n.lineTo(x*d*e.x,r*e.y),n.stroke();for(var M=0;M<=h.y;M++)n.beginPath(),n.moveTo(0,M*m*e.y),n.lineTo(s*e.x,M*m*e.y),n.stroke()}}},[e]),(0,Y.jsx)("canvas",{ref:t,style:{backgroundColor:"#f0f0f0",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",border:"1px solid #d0d0d0",borderRadius:"4px",overflow:"hidden",position:"absolute",top:0,left:0,boxSizing:"border-box",zIndex:1}})},ye=xe,fe=function(){var a=(0,v.useState)([]),e=D()(a,2),t=e[0],i=e[1],n=(0,v.useState)(null),s=D()(n,2),r=s[0],d=s[1],m=(0,v.useState)({x:0,y:0,sizeX:5,sizeY:3,type:"new"}),x=D()(m,2),M=x[0],b=x[1],w=(0,v.useState)({x:1,y:1}),y=D()(w,2),C=y[0],j=y[1];return(0,v.useEffect)(function(){var R=function(){var X=window.innerWidth-K,l=window.innerHeight,S=X/_.width,g=l/_.height;j({x:S,y:g})};return window.addEventListener("resize",R),R(),function(){window.removeEventListener("resize",R)}},[]),(0,Y.jsxs)("div",{className:u["big-box"],children:[(0,Y.jsx)(de,{setShadowPosition:b,setComponentData:i}),(0,Y.jsxs)("div",{className:u["panel-edit"],style:{width:"calc(100% - ".concat(K,"px)")},children:[(0,Y.jsx)(he,{shadowPosition:M,scale:C,componentData:t}),(0,Y.jsx)(ve,{componentData:t,setComponentData:i,curComponent:r,setCurComponent:d,scale:C,setShadowPosition:b}),(0,Y.jsx)(ye,{scale:C})]})]})},me=fe},59739:function(z,T,f){"use strict";f.d(T,{Z:function(){return $}});var G=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),D={randomUUID:G},v,J=new Uint8Array(16);function O(){if(!v&&(v=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!v))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v(J)}for(var u=[],h=0;h<256;++h)u.push((h+256).toString(16).slice(1));function _(o,c=0){return(u[o[c+0]]+u[o[c+1]]+u[o[c+2]]+u[o[c+3]]+"-"+u[o[c+4]]+u[o[c+5]]+"-"+u[o[c+6]]+u[o[c+7]]+"-"+u[o[c+8]]+u[o[c+9]]+"-"+u[o[c+10]]+u[o[c+11]]+u[o[c+12]]+u[o[c+13]]+u[o[c+14]]+u[o[c+15]]).toLowerCase()}function K(o,c=0){var k=_(o,c);if(!validate(k))throw TypeError("Stringified UUID is invalid");return k}var re=null;function Q(o,c,k){if(D.randomUUID&&!c&&!o)return D.randomUUID();o=o||{};var H=o.random||(o.rng||O)();if(H[6]=H[6]&15|64,H[8]=H[8]&63|128,c){k=k||0;for(var Z=0;Z<16;++Z)c[k+Z]=H[Z];return c}return _(H)}var $=Q},38498:function(z,T,f){var G=f(78770);function D(v){if(Array.isArray(v))return G(v)}z.exports=D,z.exports.__esModule=!0,z.exports.default=z.exports},20698:function(z){function T(f){if(typeof Symbol!="undefined"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}z.exports=T,z.exports.__esModule=!0,z.exports.default=z.exports},91162:function(z){function T(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}z.exports=T,z.exports.__esModule=!0,z.exports.default=z.exports},15558:function(z,T,f){var G=f(38498),D=f(20698),v=f(31479),J=f(91162);function O(u){return G(u)||D(u)||v(u)||J()}z.exports=O,z.exports.__esModule=!0,z.exports.default=z.exports}}]);
