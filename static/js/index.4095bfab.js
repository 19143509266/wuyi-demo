(()=>{"use strict";var e={1117:function(){},5715:function(e,t,l){var a=l("2676"),i=l("5271"),n=l("8751"),r=l("2094"),s=l("7363"),o=l("3062");class d{get MinX(){return Math.min(this.startX,this.endX)}get MaxX(){return Math.max(this.startX,this.endX)}get MinY(){return Math.min(this.startY,this.endY)}get MaxY(){return Math.max(this.startY,this.endY)}draw(e){let t=this.ctx;t.beginPath(),t.moveTo(this.MinX*e,this.MinY*e),t.lineTo(this.MaxX*e,this.MinY*e),t.lineTo(this.MaxX*e,this.MaxY*e),t.lineTo(this.MinX*e,this.MaxY*e),t.lineTo(this.MinX*e,this.MinY*e),t.fillStyle=this.color,t.fill(),t.lineCap="square",t.strokeStyle="#fff",t.lineWidth=3,t.stroke(),this.text&&(t.font="16px Arial",t.fillStyle="black",t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,(this.MinX+this.MaxX)/2*e,(this.MinY+this.MaxY)/2*e))}isInside(e,t){return e>=this.MinX&&e<=this.MaxX&&t>=this.MinY&&t<=this.MaxY}constructor(e,t,l,a){(0,o._)(this,"color",void 0),(0,o._)(this,"startX",void 0),(0,o._)(this,"startY",void 0),(0,o._)(this,"endX",void 0),(0,o._)(this,"endY",void 0),(0,o._)(this,"text",void 0),(0,o._)(this,"ctx",void 0),this.ctx=e,this.color=t,this.startX=l,this.startY=a,this.endX=l,this.endY=a,this.text=""}}class c{get MinX(){return Math.min(this.startX,this.endX)}get MaxX(){return Math.max(this.startX,this.endX)}get MinY(){return Math.min(this.startY,this.endY)}get MaxY(){return Math.max(this.startY,this.endY)}get centerX(){return(this.startX+this.endX)/2}get centerY(){return(this.startY+this.endY)/2}get radius(){let e=this.endX-this.startX,t=this.endY-this.startY;return Math.sqrt(e*e+t*t)/2}draw(e){let t=this.ctx;t.beginPath(),t.arc(this.centerX*e,this.centerY*e,this.radius*e,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.lineCap="square",t.strokeStyle="#fff",t.lineWidth=3,t.stroke(),this.text&&(t.font="16px Arial",t.fillStyle="black",t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,this.centerX*e,this.centerY*e))}isInside(e,t){let l=e-this.centerX,a=t-this.centerY;return Math.sqrt(l*l+a*a)<=this.radius}constructor(e,t,l,a){(0,o._)(this,"color",void 0),(0,o._)(this,"startX",void 0),(0,o._)(this,"startY",void 0),(0,o._)(this,"endX",void 0),(0,o._)(this,"endY",void 0),(0,o._)(this,"text",void 0),(0,o._)(this,"ctx",void 0),this.ctx=e,this.color=t,this.startX=l,this.startY=a,this.endX=l,this.endY=a,this.text=""}}class u{get MinX(){return Math.min(this.startX,this.endX)}get MaxX(){return Math.max(this.startX,this.endX)}get MinY(){return Math.min(this.startY,this.endY)}get MaxY(){return Math.max(this.startY,this.endY)}get centerX(){return(this.startX+this.endX)/2}get centerY(){return(this.startY+this.endY)/2}get radiusX(){return Math.abs(this.endX-this.startX)/2}get radiusY(){return Math.abs(this.endY-this.startY)/2}draw(e){let t=this.ctx;t.beginPath(),t.ellipse(this.centerX*e,this.centerY*e,this.radiusX*e,this.radiusY*e,0,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.lineCap="square",t.strokeStyle="#fff",t.lineWidth=3,t.stroke(),this.text&&(t.font="16px Arial",t.fillStyle="black",t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,this.centerX*e,this.centerY*e))}isInside(e,t){let l=(e-this.centerX)/this.radiusX,a=(t-this.centerY)/this.radiusY;return l*l+a*a<=1}constructor(e,t,l,a){(0,o._)(this,"color",void 0),(0,o._)(this,"startX",void 0),(0,o._)(this,"startY",void 0),(0,o._)(this,"endX",void 0),(0,o._)(this,"endY",void 0),(0,o._)(this,"text",void 0),(0,o._)(this,"ctx",void 0),this.ctx=e,this.color=t,this.startX=l,this.startY=a,this.endX=l,this.endY=a,this.text=""}}var h=l("8605"),p=l("8550"),m=l("3026"),y=l("3012");let x={"big-box":"big-box-wVSaOm",bigBox:"big-box-wVSaOm","panel-edit":"panel-edit-cWnaqw",panelEdit:"panel-edit-cWnaqw",shadow:"shadow-I_0Tfz",slider:"slider-r7ptWQ",item:"item-SUTORl",outline:"outline-rbK8En",handle:"handle-qRG5L7","handle-tl":"handle-tl-sffw5s",handleTl:"handle-tl-sffw5s","handle-br":"handle-br-BSkNJP",handleBr:"handle-br-BSkNJP","handle-tr":"handle-tr-CzmFz1",handleTr:"handle-tr-CzmFz1","handle-bl":"handle-bl-nU3RMx",handleBl:"handle-bl-nU3RMx","handle-tm":"handle-tm-WwvPV_",handleTm:"handle-tm-WwvPV_","handle-bm":"handle-bm-eV31St",handleBm:"handle-bm-eV31St","handle-ml":"handle-ml-uJsin_",handleMl:"handle-ml-uJsin_","handle-mr":"handle-mr-d3pT0c",handleMr:"handle-mr-d3pT0c",move:"move-ZHHyo9","move-top":"move-top-mDDB7z",moveTop:"move-top-mDDB7z","move-bottom":"move-bottom-wXKfG2",moveBottom:"move-bottom-wXKfG2","move-left":"move-left-_2vSLJ",moveLeft:"move-left-_2vSLJ","move-right":"move-right-zQKPUH",moveRight:"move-right-zQKPUH"},v={x:36,y:18},f={width:1600,height:900},b=["tl","tm","tr","ml","mr","bl","bm","br"];var g=l("4918");let w=(e,t,l)=>"x"===e?t*l.x/v.x*f.width:"y"===e?t*l.y/v.y*f.height:void 0,j=(e,t,l)=>"x"===e?t/l.x/f.width*v.x:"y"===e?t/l.y/f.height*v.y:0,k=(e,t)=>e.x<t.x+t.sizeX&&e.x+e.sizeX>t.x&&e.y<t.y+t.sizeY&&e.y+e.sizeY>t.y,C=(e,t)=>{let l=!1;return t(t=>{let a=S(t,e);return a.x=Math.min(Math.max(a.x,0),v.x-(a.sizeX||0)),a.y=Math.max(a.y,0),t.map(e=>{if(e.id!==a.id&&k(a,e)){l=!0;let t=e.y;return a.y<=e.y&&(t+=a.sizeY-e.y),{...e,y:t}}return e})}),l},M=(e,t,l)=>{t(t=>t.map(a=>{let i=a;return a.y>0&&(i=S(t,a)),a.id!==(null==e?void 0:e.id)||l?i:e}))},S=(e,t)=>{let l=e.filter(e=>e.y<t.y&&e.x<t.x+t.sizeX&&e.x+e.sizeX>t.x&&e.id!==t.id).reduce((e,t)=>null===e||t.y>e.y?t:e,null);return l?l.x+l.sizeX<=t.x||t.x+t.sizeX<=l.x?{...t,y:l.y}:t.y<l.y+l.sizeY?{...t,y:t.y-l.sizeY}:{...t,y:l.y+l.sizeY}:{...t,y:0}},X=(e,t,l,a,n,r)=>{let s=(0,i.useRef)(e);s.current=e;let o=null;return{handleResizeMouseDown:(0,i.useCallback)((e,i)=>{var d,c,u,h;let p=e.clientX,m=e.clientY,y=(null===(d=s.current)||void 0===d?void 0:d.sizeX)||0,x=(null===(c=s.current)||void 0===c?void 0:c.sizeY)||0,f=(null===(u=s.current)||void 0===u?void 0:u.x)||0,b=(null===(h=s.current)||void 0===h?void 0:h.y)||0,g=e=>{var l,d,c,u;if(!s.current)return;let h=Math.round(j("x",e.clientX-p,n)),g=Math.round(j("y",e.clientY-m,n)),w=y,k=x,S=f,X=b;switch(i){case"tl":w=y-h,k=x-g,S=f+h,X=b+g;break;case"tm":k=x-g,X=b+g;break;case"tr":w=y+h,k=x-g,X=b+g;break;case"ml":w=y-h,S=f+h;break;case"mr":w=y+h;break;case"bl":w=y-h,k=x+g,S=f+h;break;case"bm":k=x+g;break;case"br":w=y+h,k=x+g}S+w>v.x&&(S=v.x-((null===(l=s.current)||void 0===l?void 0:l.sizeX)||0),w=(null===(d=s.current)||void 0===d?void 0:d.sizeX)||0),S<0&&(S=0,w=(null===(c=s.current)||void 0===c?void 0:c.sizeX)||0),X<0&&(X=0,k=(null===(u=s.current)||void 0===u?void 0:u.sizeY)||0),r({...o={...s.current,sizeX:w,sizeY:k,x:S,y:X},type:"drag"}),!C(o,a)&&(t(o),M(s.current,a,!1))},w=()=>{if(r({x:0,y:0,sizeX:0,sizeY:0,type:"new"}),o){let e=S(l,o);e.x=Math.min(Math.max(e.x,0),v.x-(e.sizeX||0)),e.y=Math.max(e.y,0),t(e),a(t=>t.map(t=>t.id===(null==e?void 0:e.id)?e:t))}window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",w)};window.addEventListener("mousemove",g),window.addEventListener("mouseup",w)},[e,t,l,a,n])}},z=(e,t,l,a,n,r)=>{let s=(0,i.useRef)(e);s.current=e;let o=null;return{handleMoveMouseDown:(0,i.useCallback)(e=>{var i,d;let c=e.clientX,u=e.clientY,h=(null===(i=s.current)||void 0===i?void 0:i.x)||0,p=(null===(d=s.current)||void 0===d?void 0:d.y)||0,m=e=>{var l;if(!s.current)return;let i=Math.round(j("x",e.clientX-c,n)),d=Math.round(j("y",e.clientY-u,n)),m=h+i,y=p+d;m=Math.min(Math.max(m,0),v.x-((null===(l=s.current)||void 0===l?void 0:l.sizeX)||0)),y=Math.max(y,0),r({...o={...s.current,x:m,y:y},type:"drag"}),!C(o,a)&&(t(o),M(s.current,a,!1))},y=()=>{if(r({x:0,y:0,sizeX:0,sizeY:0,type:"new"}),o){let e=S(l,o);e.x=Math.min(Math.max(e.x,0),v.x-(e.sizeX||0)),e.y=Math.max(e.y,0),t(e),a(t=>t.map(t=>t.id===(null==e?void 0:e.id)?e:t))}window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",y)};window.addEventListener("mousemove",m),window.addEventListener("mouseup",y)},[e,t,l,a,n])}},Y=(e,t,l,a)=>{let[n,r]=(0,i.useState)(0),[s,o]=(0,i.useState)(0),[d,c]=(0,i.useState)(1),[u,h]=(0,i.useState)(1);return(0,i.useEffect)(()=>{let i=f.width,n=f.height,s=Math.round((e-260)/(i/v.x)),d=Math.round(t/(n/v.y)),u=Math.round(l/i*v.x),p=Math.round(a/n*v.y);r(s),o(d),c(u),h(p)},[e,t,l,a]),{matrixX:n,matrixY:s,sizeX:d,sizeY:u}},I=e=>{let{setShadowPosition:t,setComponentData:l}=e,[n,r]=(0,i.useState)({x:0,y:0}),{matrixX:s,matrixY:o,sizeX:d,sizeY:c}=Y(n.x,n.y,200,150),u=f.width/v.x,h=f.height/v.y,p=e=>{let l=e.clientX,a=e.clientY;l>0&&a>0&&r({x:l,y:a}),t({x:Math.round((l-260)/u),y:Math.round(a/h),sizeX:5,sizeY:3,type:"new"})},m=()=>{let e=n.x,t=n.y;if(e>260&&t>0){let e={id:(0,g.Z)(),x:s,y:o,sizeX:d,sizeY:c};l(t=>[...t,e]),M(e,l,!0)}};return(0,a.jsx)("div",{className:x.slider,style:{width:260},children:Array.from({length:3}).map((e,t)=>(0,a.jsxs)("div",{className:x.item,draggable:!0,onDrag:p,onDragEnd:m,children:["item",t+1]},t))})},L=e=>{let{componentData:t,setComponentData:l,curComponent:i,setCurComponent:n,scale:r,setShadowPosition:s}=e,{handleResizeMouseDown:o}=X(i,n,t,l,r,s),{handleMoveMouseDown:d}=z(i,n,t,l,r,s),c=e=>{n(e)};return(0,a.jsx)("div",{style:{width:"100%",height:"100%",userSelect:"none"},children:t.map(e=>(0,a.jsxs)("div",{style:{width:w("x",e.sizeX,r),height:w("y",e.sizeY,r),background:"#fff000",transform:`translate(${w("x",e.x,r)}px, ${w("y",e.y,r)}px)`,position:"absolute",zIndex:999},onClick:()=>c(e),children:[e.id,i&&i.id===e.id?(0,a.jsxs)("div",{className:x.outline,children:[b.map(e=>(0,a.jsx)("div",{className:`${x.handle} ${x[`handle-${e}`]}`,onMouseDown:t=>o(t,e)},e)),["top","bottom","left","right"].map(e=>(0,a.jsx)("div",{className:`${x.move} ${x[`move-${e}`]}`,onMouseDown:e=>d(e)},e))]}):null]},e.id))})},A=e=>{let{shadowPosition:t,scale:l,componentData:n}=e;if(t.x<0||t.y<0||0===t.x&&0===t.y)return null;let r=f.width/v.x,s=f.height/v.y,o=(0,i.useMemo)(()=>{let e=S(n,{id:"shadow",x:t.x,y:t.y,sizeX:t.sizeX,sizeY:t.sizeY});e.x=Math.min(Math.max(e.x,0),v.x-(e.sizeX||0)),e.y=Math.max(e.y,0);let a=e.x*r,i=e.y*s,o=e.sizeX*r,d=e.sizeY*s;return{transform:`translate(${a*l.x}px, ${i*l.y}px) rotate(0deg)`,width:o*l.x,height:d*l.y,transition:"0.1s",zIndex:10}},[t,r,s]);return(0,a.jsx)("div",{className:x.shadow,style:o})},T=e=>{let{scale:t}=e,l=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=l.current;if(e){let l=e.getContext("2d");if(l){let{width:a,height:i}=f;e.width=a*t.x,e.height=i*t.y,l.strokeStyle="#e0e0e0",l.lineWidth=1;let n=a/v.x,r=i/v.y;for(let e=0;e<=v.x;e++)l.beginPath(),l.moveTo(e*n*t.x,0),l.lineTo(e*n*t.x,i*t.y),l.stroke();for(let e=0;e<=v.y;e++)l.beginPath(),l.moveTo(0,e*r*t.y),l.lineTo(a*t.x,e*r*t.y),l.stroke()}}},[t]),(0,a.jsx)("canvas",{ref:l,style:{backgroundColor:"#f0f0f0",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",border:"1px solid #d0d0d0",borderRadius:"4px",overflow:"hidden",position:"absolute",top:0,left:0,boxSizing:"border-box",zIndex:1}})};var Z=l("9226"),N=l.n(Z);let $="grid-item-bvQI8d",P="grid-item-content-NXm3Sp",R="drag-handle-RY5YSC",_="top-SAT0Z5",E="bottom-To2lCB",O="left-yWaxuG",D="right-VejV4V";var F=l("8435");let B={a:{type:"bar"},b:{type:"line"},c:{type:"pie"}},H=[{field:"2021",value:100,category:"A"},{field:"2022",value:200,category:"B"},{field:"2023",value:150,category:"C"}],V=[{field:"A",value:40},{field:"B",value:30},{field:"C",value:30}],W=e=>{let{id:t}=e,[l,n]=(0,i.useState)({}),r=(0,i.useRef)(null),[s,o]=(0,i.useState)(null),d=e=>{n({id:e,...B[e]})};return(0,i.useEffect)(()=>{d(t)},[t]),(0,i.useEffect)(()=>{if(r.current&&l.type){var e,t,a,i,n,d;let c=null;switch(l.type){case"bar":;e=r.current,t=H,c=new F.sg(e,{data:t,xField:"field",yField:"value",seriesField:"category",isGroup:!0,isStack:!0});break;case"line":;a=r.current,i=H,c=new F.x1(a,{data:i,xField:"field",yField:"value",seriesField:"category",isStack:!0});break;case"pie":;n=r.current,d=V,c=new F.by(n,{data:d,angleField:"value",colorField:"field"})}c&&c.render(),s&&s.destroy(),o(c)}return()=>{s&&s.destroy()}},[l]),(0,a.jsx)("div",{id:t,ref:r,style:{width:"100%",height:"100%"}})},G=["s","w","e","n","sw","nw","se","ne"],q=(e,t)=>(e.forEach(e=>{var l;(null===(l=e.child)||void 0===l?void 0:l.length)?t=q(e.child,t):t+=1}),t+=1),U=(e,t)=>(e.child.forEach(l=>{var a;if(l.x=e.x+1,null===(a=l.child)||void 0===a?void 0:a.length){let e=q(l.child,0);l.y=Math.floor(e/2)+t,t=U(l,t)}else t+=1,l.y=t-1}),t+=1),J=e=>{var t;let[l]=e;return(null===(t=l.child)||void 0===t?void 0:t.length)?J(l.child):l.y},K=e=>{let t=e.child.length;if(!t)return"";let l="",{x:a,y:i}=e;return e.child.forEach((n,r)=>{var s,o,d,c;let{y:u,z:h}=n;if(null===(s=n.child)||void 0===s?void 0:s.length){let t=41.4*q(e.child,0)/2+41.4*(J(e.child)||0),r=41.4*q(n.child,0)/2+41.4*J(n.child),s=0,o=0;t<r?(s=t,o=r):[s,o]=[r,t],i>=u&&(s=t,o=r),l+=`M${24+68*a} ${s} L${24+68*a} ${o} L${68+68*a} ${o}`,l+=K(n)}!(null===(o=n.child)||void 0===o?void 0:o.length)&&(u>=i?l+=`M${24+68*a} ${40*i} L${24+68*a} ${(u+1)*41.4-20.69921875} L${68+68*a} ${(u+1)*41.4-20.69921875}`:l+=`M${24+68*a} ${(u+(1===t&&0===r?0:1)+((null===(c=e.child[r+1])||void 0===c?void 0:null===(d=c.child)||void 0===d?void 0:d.length)?i-u-1:0))*41.4+20+(1===t&&0===r?26:0)} L${24+68*a} ${(u+1)*41.4-20.69921875-(1===t&&0===r?1.4*(h||0):0)} L${68+68*a} ${(u+1)*41.4-20.69921875-(1===t&&0===r?1.4*(h||0):0)}`)}),l},Q=(e,t)=>(e.child.forEach(l=>{var a;t=(null===(a=l.child)||void 0===a?void 0:a.length)?Q(l,t):Math.max(t,l.y,e.y)}),t),ee=e=>{var t,l;let a=null===(t=e.child)||void 0===t?void 0:t.length,i="";if(!a&&Array.isArray(e.child)){let{x:t,y:l}=e;i+=`M${48+68*t} ${41.4*l+20} L${88+68*t} ${41.4*l+20}`}else if(null===(l=e.child)||void 0===l?void 0:l.length){let t=Math.max(Q(e,0),q(e.child,0)+J(e.child)-1),l=41.4*q(e.child,0)/2+41.4*(J(e.child)||0),{x:a}=e;i+=`M${24+68*a} ${l} L${24+68*a} ${41.4*t+20} L${64+68*a} ${41.4*t+20}`,e.child.forEach(e=>{i+=ee(e)})}return i};var et=l("7556"),el=l("1232");let ea=()=>(0,a.jsx)("div",{className:"filed",style:{width:750},children:"字段"}),ei=[{key:"and",label:"and"},{key:"or",label:"or"}],en=e=>{let{x:t,relationList:l,logic:n,addCondReal:r,setRelationList:s,removeRelationList:o,setLogic:d}=e,c=(e,t)=>e.map(e=>{let l="and"===t?"or":"and";return e.child?{...e,logic:l,child:c(e.child,l)}:{...e,logic:l}}),u=(0,i.useMemo)(()=>({marginLeft:t?"20px":0}),[]),h=(e,t,l)=>{let a="condition"===e?{fieldId:"",value:"",enumValue:"",term:"",filterType:"logic",name:"",deType:"",key:(0,g.Z)()}:{child:[],logic:l,key:(0,g.Z)()};s(e=>e.map(e=>e.key===t?{...e,child:[...e.child,a]}:e.child&&e.child.length>0?{...e,child:e.child.map(e=>e.key===t?{...e,child:[...e.child,a]}:e)}:e))},p=e=>{s(t=>t.find(t=>t.key===e.key)?t.filter(t=>t.key!==e.key):t.map(t=>{if(t.child){let l=t.child.filter(t=>t.key!==e.key);return{...t,child:l}}return t}))};return(0,a.jsxs)("div",{className:"logic",style:u,children:[(0,a.jsx)("div",{className:"logic-left",children:(0,a.jsx)("div",{className:"operate-title",children:t?(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)("span",{style:{color:"#bfbfbf"},className:"mrg-title",children:"or"===n?"OR":"AND"}),(0,a.jsx)("span",{className:"operate-icon",children:(0,a.jsx)(et.Z,{onClick:e=>o(e)})})]}):(0,a.jsx)(el.Z,{menu:{items:ei,onClick:e=>{d(e.key),s(t=>c(t,e.key))}},placement:"bottom",trigger:["click"],children:(0,a.jsx)("span",{style:{color:"rgba(0 0 0 / 65%)"},className:"mrg-title fir",children:"or"===n?"OR":"AND"})})})}),(0,a.jsxs)("div",{className:"logic-right",children:[l.map((e,t)=>e.child?(0,a.jsx)(en,{x:e.x,logic:e.logic,relationList:e.child,addCondReal:(t,l)=>h(t,e.key,l),setRelationList:s,removeRelationList:()=>p(e),setLogic:d},e.key):(0,a.jsx)(ea,{},e.key)),(0,a.jsxs)("div",{className:"logic-right-add",children:[(0,a.jsx)("button",{onClick:()=>r("condition","or"===n?"and":"or"),className:"operand-btn",children:"+添加条件"}),t<2&&(0,a.jsx)("button",{onClick:()=>r("relation","or"===n?"and":"or"),className:"operand-btn",children:"+添加关系"})]})]})]})};var er=l("9017");let es="container-zfp_dX";var eo=l("1510"),ed=l("3490");let ec="container-v4ahwd",eu="groupTitle-EOhGNl",eh="divider-pP60EZ",ep="componentGroup-FFg_df",em="componentItem-JLfXp5",ey=[{key:"general",title:"通用",components:[{label:"按钮",value:"Button",type:"button"},{label:"图标",value:"Icon",type:"icon"}]},{key:"layout",title:"布局",components:[{label:"分割线",value:"Divider",type:"layout"}]},{key:"data-entry",title:"数据录入",components:[{label:"级联选择",value:"Cascader",type:"form-item"},{label:"多选框",value:"Checkbox",type:"form-item"},{label:"日期选择框",value:"DatePicker",type:"form-item"},{label:"输入框",value:"Input",type:"form-item"},{label:"数字输入框",value:"InputNumber",type:"form-item"},{label:"单选框",value:"Radio",type:"form-item"},{label:"评分",value:"Rate",type:"form-item"},{label:"选择器",value:"Select",type:"form-item"},{label:"滑动输入条",value:"Slider",type:"form-item"},{label:"开关",value:"Switch",type:"form-item"},{label:"时间选择框",value:"TimePicker",type:"form-item"},{label:"树选择",value:"TreeSelect",type:"form-item"},{label:"上传",value:"Upload",type:"form-item"}]},{key:"data-display",title:"数据展示",components:[{label:"头像",value:"Avatar",type:"data-display"},{label:"日历",value:"Calendar",type:"data-display"},{label:"卡片",value:"Card",type:"data-display"},{label:"走马灯",value:"Carousel",type:"data-display"},{label:"折叠面板",value:"Collapse",type:"data-display"},{label:"描述列表",value:"Descriptions",type:"data-display"},{label:"空状态",value:"Empty",type:"data-display"},{label:"图片",value:"Image",type:"data-display"},{label:"列表",value:"List",type:"data-display"},{label:"气泡卡片",value:"Popover",type:"data-display"},{label:"二维码",value:"QRCode",type:"data-display"},{label:"分段控制器",value:"Segmented",type:"data-display"},{label:"统计数值",value:"Statistic",type:"data-display"},{label:"表格",value:"Table",type:"data-display"},{label:"标签页",value:"Tabs",type:"data-display"},{label:"标签",value:"Tag",type:"data-display"},{label:"时间轴",value:"Timeline",type:"data-display"},{label:"文字提示",value:"Tooltip",type:"data-display"},{label:"漫游式引导",value:"Tour",type:"data-display"},{label:"树形控件",value:"Tree",type:"data-display"}]}],ex=e=>{let{handleComponentDragEnd:t}=e;return(0,a.jsx)("div",{className:ec,children:ey.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:eu,children:e.title}),(0,a.jsx)(ed.Z,{className:eh}),(0,a.jsx)("div",{className:ep,children:e.components.map(e=>(0,a.jsx)("div",{className:em,draggable:!0,onDragEnd:l=>t(l,{...e,componentCategory:"form"}),children:e.label},e.value))})]},e.key))})},ev=["s","w","e","n","sw","nw","se","ne"],ef={Button:{props:{block:!0,danger:!1,disabled:!1,ghost:!1,href:null,icon:null,iconPosition:"start",shape:"default",size:"middle",target:"_blank",type:"default"},customAttr:{label:"按 钮",event:null},configItems:[{type:"input",label:"名称",name:"label",attr:"customAttr"},{type:"select",label:"按钮类型",name:"type",options:[{label:"默认",value:"default"},{label:"主要",value:"primary"},{label:"虚线",value:"dashed"},{label:"链接",value:"link"},{label:"文字",value:"text"}],attr:"props"},{type:"switch",label:"危险",name:"danger",attr:"props"},{type:"input",label:"链接",name:"href",attr:"props"},{type:"radio",label:"打开方式",name:"target",options:[{label:"当前窗口",value:"_self"},{label:"新窗口",value:"_blank"}],attr:"props"},{type:"radio",label:"按钮大小",name:"size",options:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}],attr:"props"},{type:"radio",label:"按钮形状",name:"shape",options:[{label:"默认",value:"default"},{label:"圆形",value:"circle"},{label:"圆角",value:"round"}],attr:"props"},{type:"radio",label:"事件",name:"event",options:[{label:"提交表单",value:"submit"},{label:"重置表单",value:"reset"}],attr:"customAttr"}]},Cascader:{props:{options:[{label:"选项1",value:"1",key:"1",children:[{label:"选项1-1",value:"1-1",key:"1-1",children:[]}]}],placeholder:"请选择",showSearch:!1,multiple:!1,expandTrigger:"click"},customAttr:{dataMode:"static",label:"Cascader"},configItems:[{type:"radio",label:"",name:"dataMode",options:[{label:"静态数据",value:"static"},{label:"动态数据",value:"dynamic"}],attr:"customAttr"},{type:"tree-datasource",name:"options"},{type:"input",label:"名称",name:"label",attr:"customAttr"},{type:"input",label:"占位符",name:"placeholder",attr:"props"},{type:"switch",label:"搜索",name:"showSearch",attr:"props"},{type:"switch",label:"多选",name:"multiple",attr:"props"},{type:"radio",label:"次级菜单展开方式",name:"expandTrigger",options:[{label:"点击",value:"click"},{label:"移入",value:"hover"}],attr:"props"}]},Checkbox:{props:{options:[{label:"选项1",value:"1",key:"1"},{label:"选项2",value:"2",key:"2"}]},customAttr:{label:"Checkbox",dataMode:"static"},configItems:[{type:"radio",label:"",name:"dataMode",options:[{label:"静态数据",value:"static"},{label:"动态数据",value:"dynamic"}],attr:"customAttr"},{type:"datasource",name:"options"},{type:"input",label:"名称",name:"label",attr:"customAttr"}]},DatePicker:{props:{},customAttr:{label:"DatePicker"},configItems:[{type:"input",label:"名称",name:"label",attr:"customAttr"}]},Input:{props:{addonBefore:null,addonAfter:null,maxLength:null,showCount:!1,allowClear:!1,placeholder:"请输入"},customAttr:{label:"Input"},configItems:[{type:"input",label:"名称",name:"label",attr:"customAttr"},{type:"input",label:"占位符",name:"placeholder",attr:"props"},{type:"input",label:"前置标签",name:"addonBefore",attr:"props"},{type:"input",label:"后置标签",name:"addonAfter",attr:"props"},{type:"input-number",label:"最大长度",name:"maxLength",attr:"props"},{type:"switch",label:"展示字数",name:"showCount",attr:"props"},{type:"switch",label:"可清除",name:"allowClear",attr:"props"}]},InputNumber:{props:{},customAttr:{label:"InputNumber"},configItems:[{type:"input",label:"名称",name:"label",attr:"customAttr"}]},Radio:{props:{options:[{label:"选项1",value:"1",key:"1"},{label:"选项2",value:"2",key:"2"}]},customAttr:{label:"Radio",dataMode:"static"},configItems:[{type:"radio",label:"",name:"dataMode",options:[{label:"静态数据",value:"static"},{label:"动态数据",value:"dynamic"}],attr:"customAttr"},{type:"datasource",name:"options"},{type:"input",label:"名称",name:"label",attr:"customAttr"}]},Rate:{props:{},customAttr:{label:"Rate"},configItems:[{type:"input",label:"名称",name:"label",attr:"customAttr"}]},Select:{props:{options:[{label:"选项1",value:"1",key:"1"},{label:"选项2",value:"2",key:"2"}],placeholder:"请选择",allowClear:!1,showSearch:!1,mode:"single"},customAttr:{label:"Select",dataMode:"static"},configItems:[{type:"radio",label:"",name:"dataMode",options:[{label:"静态数据",value:"static"},{label:"动态数据",value:"dynamic"}],attr:"customAttr"},{type:"datasource",name:"options"},{type:"input",label:"名称",name:"label",attr:"customAttr"},{type:"input",label:"占位符",name:"placeholder",attr:"props"},{type:"switch",label:"可清除",name:"allowClear",attr:"props"},{type:"switch",label:"搜索",name:"showSearch",attr:"props"},{type:"radio",label:"模式",name:"mode",attr:"props",options:[{label:"单选",value:"single"},{label:"多选",value:"multiple"}]}]},Slider:{props:{},customAttr:{label:"Slider"},configItems:[{type:"input",label:"名称",name:"label",attr:"customAttr"}]},Switch:{props:{},customAttr:{label:"Switch"},configItems:[{type:"input",label:"名称",name:"label",attr:"customAttr"}]},TimePicker:{props:{},customAttr:{label:"TimePicker"},configItems:[{type:"input",label:"名称",name:"label",attr:"customAttr"}]},TreeSelect:{props:{treeData:[{label:"选项1",value:"1",key:"1",children:[{label:"选项1-1",value:"1-1",key:"1-1",children:[]}]}],placeholder:"请选择",allowClear:!1,showSearch:!1,multiple:!1},customAttr:{dataMode:"static",label:"TreeSelect"},configItems:[{type:"radio",label:"",name:"dataMode",options:[{label:"静态数据",value:"static"},{label:"动态数据",value:"dynamic"}],attr:"customAttr"},{type:"tree-datasource",name:"treeData"},{type:"input",label:"名称",name:"label",attr:"customAttr"},{type:"input",label:"占位符",name:"placeholder",attr:"props"},{type:"switch",label:"可清除",name:"allowClear",attr:"props"},{type:"switch",label:"搜索",name:"showSearch",attr:"props"},{type:"switch",label:"多选",name:"multiple",attr:"props"}]},Avatar:{props:{alt:"无法显示",shape:"circle",size:32,src:""},customAttr:{},configItems:[{type:"input",label:"错误显示",name:"alt",attr:"props"},{type:"radio",label:"形状",name:"shape",attr:"props",options:[{label:"圆形",value:"circle"},{label:"方形",value:"square"}]},{type:"input-number",label:"大小",name:"size",attr:"props"},{type:"input",label:"地址",name:"src",attr:"props"}]},Calendar:{props:{},customAttr:{},configItems:[]}},eb=e=>{let{handleComponentDragEnd:t}=e,l=[{key:"form",label:"表单",children:(0,a.jsx)(ex,{handleComponentDragEnd:t})},{key:"chart",label:"图表",children:"Tab 2 content"}];return(0,a.jsx)("div",{className:es,style:{width:260},children:(0,a.jsx)(eo.Z,{items:l})})},eg="container-VTM4xS",ew="grid-item-NAIDXM",ej="grid-item-content-OX_bKK",ek="drag-handle-iG4GCV",eC="top-LbvRGR",eM="bottom-QlbNIS",eS="left-cbULGJ",eX="right-Jnp8wS";var ez=l("2967"),eY=l("5533"),eI=l("7702");let eL="container-2UBTLb",eA=e=>{let{componentItem:t,form:l}=e,i=(()=>{switch(t.componentType){case"Checkbox":return ez.Z.Group;case"Radio":return m.ZP.Group;default:return eY[t.componentType]}})();if(!i)return(0,a.jsxs)("div",{children:["Invalid component type: ",t.componentType]});let n=()=>{var e;switch(null==t?void 0:null===(e=t.customAttr)||void 0===e?void 0:e.event){case"submit":l.validateFields().then(e=>{console.log("Form values:",e)});break;case"reset":l.resetFields()}};return(0,a.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center"},className:eL,children:(e=>{var l,r;switch(e){case"form-item":return(0,a.jsx)(eI.Z.Item,{name:t.i,label:null==t?void 0:null===(l=t.customAttr)||void 0===l?void 0:l.label,children:(0,a.jsx)(i,{...t.props})});case"button":return(0,a.jsx)(eI.Z.Item,{children:(0,a.jsx)(i,{...t.props,onClick:n,children:(null==t?void 0:null===(r=t.customAttr)||void 0===r?void 0:r.label)||""})});case"layout":return(0,a.jsx)(eI.Z.Item,{children:(0,a.jsx)(i,{...t.props})});case"data-display":return(0,a.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(i,{...t.props})});default:return(0,a.jsx)("div",{children:"Invalid component type:"})}})(t.type)})},eT="container-fluid-dR0V0x",eZ=e=>{let{componentItem:t,handleEditComponent:l}=e;return(0,a.jsx)("div",{className:eT,children:(0,a.jsx)(et.Z,{style:{cursor:"pointer"},onClick:e=>{e.stopPropagation(),l(t,"delete")}})})},eN={model_1:{namespace:"low_code",model:()=>{let[e,t]=(0,i.useState)(12),[l,a]=(0,i.useState)(30);return{gridCols:e,setGridCols:t,gridRowHeight:l,setGridRowHeight:a}}}},e$=i.createContext(null);function eP(e){let t;let{hook:l,onUpdate:a,namespace:n}=e,r=(0,i.useRef)(a),s=(0,i.useRef)(!1);try{t=l()}catch(e){console.error(`plugin-model: Invoking '${n||"unknown"}' model failed:`,e)}return(0,i.useMemo)(()=>{r.current(t)},[]),(0,i.useEffect)(()=>{s.current?r.current(t):s.current=!0}),null}let eR=new class e{constructor(){(0,o._)(this,"callbacks",{}),(0,o._)(this,"data",{}),(0,o._)(this,"update",e=>{this.callbacks[e]&&this.callbacks[e].forEach(t=>{try{let l=this.data[e];t(l)}catch(e){t(void 0)}})})}};function e_(e){return(0,a.jsxs)(e$.Provider,{value:{dispatcher:eR},children:[Object.keys(e.models).map(t=>(0,a.jsx)(eP,{hook:e.models[t],namespace:t,onUpdate:e=>{eR.data[t]=e,eR.update(t)}},t)),e.children]})}function eE(e,t){let{dispatcher:l}=(0,i.useContext)(e$),a=(0,i.useRef)(t);a.current=t;let[n,r]=(0,i.useState)(()=>a.current?a.current(l.data[e]):l.data[e]),s=(0,i.useRef)(n);s.current=n;let o=(0,i.useRef)(!1);return(0,i.useEffect)(()=>(o.current=!0,()=>{o.current=!1}),[]),(0,i.useEffect)(()=>{var t;let i=t=>{if(o.current){let e=a.current?a.current(t):t;!function e(t,l){if(t===l)return!0;if(t&&l&&"object"==typeof t&&"object"==typeof l){let a,i;if(t.constructor!==l.constructor)return!1;if(Array.isArray(t)){if((a=t.length)!=l.length)return!1;for(i=a;0!=i--;)if(!e(t[i],l[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===l.source&&t.flags===l.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===l.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===l.toString();let n=Object.keys(t);if((a=n.length)!==Object.keys(l).length)return!1;for(i=a;0!=i--;)if(!Object.prototype.hasOwnProperty.call(l,n[i]))return!1;for(i=a;0!=i--;){let a=n[i];if(!e(t[a],l[a]))return!1}return!0}return t!=t&&l!=l}(e,s.current)&&(s.current=e,r(e))}else setTimeout(()=>{l.data[e]=t,l.update(e)})};return(t=l.callbacks)[e]||(t[e]=new Set),l.callbacks[e].add(i),l.update(e),()=>{l.callbacks[e].delete(i)}},[e]),n}function eO(e){let t=i.useMemo(()=>Object.keys(eN).reduce((e,t)=>(e[eN[t].namespace]=eN[t].model,e),{}),[]);return(0,a.jsx)(e_,{models:t,...e,children:e.children})}var eD=l("6918");let eF=e=>{let{layout:t,setLayout:l,setCurComponent:i}=e;return(0,a.jsx)("div",{style:{height:54,width:"100%",boxShadow:"0 0 8px 0 rgba(0, 0, 0, 0.15)",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:16,boxSizing:"border-box"},children:(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(eD.ZP,{onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){let e=new FileReader;e.onload=e=>{try{var t;let a=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result),n=a.find(e=>{var t;return(null==e?void 0:null===(t=e.resizeHandles)||void 0===t?void 0:t.length)>0});l(a),i(n)}catch(e){console.error("文件解析失败：",e),alert("导入的文件格式不正确，请选择有效的 JSON 文件。")}},e.readAsText(a)}},e.click()},children:"导入"}),(0,a.jsx)(eD.ZP,{onClick:()=>{let e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),l=URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download="schema.json",a.click(),URL.revokeObjectURL(l)},children:"导出Schema"})]})})},eB=e=>{let{layout:t,setLayout:l,curComponent:n,setCurComponent:r,form:s}=e,{gridCols:o,gridRowHeight:d}=eE("low_code"),[c,u]=(0,i.useState)(window.innerWidth-520);(0,i.useEffect)(()=>{let e=()=>u(window.innerWidth-520);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let h=(e,t)=>{if("delete"===t)r(null),l(t=>t.filter(t=>t.id!==e.id))};return(0,a.jsxs)("div",{className:eg,style:{width:`calc(100% - ${520}px)`},children:[(0,a.jsx)(eF,{layout:t,setLayout:l,setCurComponent:r}),(0,a.jsx)("div",{style:{height:"calc(100% - 54px)",overflow:"auto"},children:(0,a.jsx)(eI.Z,{form:s,children:(0,a.jsx)(N(),{className:"layout",layout:t,cols:o,rowHeight:d,width:c,onLayoutChange:e=>{l(t=>t.map(t=>{let l=e.find(e=>e.i===t.i);if(l){let e={...t,x:l.x,y:l.y,h:l.h,w:l.w,resizeHandles:(null==n?void 0:n.id)===t.i?ev:t.resizeHandles};return e.i===(null==n?void 0:n.id)&&r(e),e}return t}))},draggableHandle:`.${ek}`,children:t.map(e=>(0,a.jsxs)("div",{style:{background:"#e6f7ff"},onClick:t=>{t.stopPropagation(),r(e)},children:[(null==n?void 0:n.id)===e.i&&(0,a.jsx)(eZ,{componentItem:e,handleEditComponent:h}),(0,a.jsxs)("div",{className:ew,style:(null==n?void 0:n.id)===e.i?{outline:"1px solid #70c0ff"}:{},children:[(0,a.jsx)("div",{className:`${ek} ${eC}`}),(0,a.jsx)("div",{className:`${ek} ${eM}`}),(0,a.jsx)("div",{className:`${ek} ${eS}`}),(0,a.jsx)("div",{className:`${ek} ${eX}`}),(0,a.jsx)("div",{className:ej,children:(0,a.jsx)(eA,{componentItem:e,form:s})})]})]},e.id))})})})]})},eH="container-Ofx95g";var eV=l("148"),eW=l("7098"),eG=l("34"),eq=l("5532"),eU=l("5973"),eJ=l("6577"),eK=l("16"),eQ=l("5421");let e0=e=>{let{name:t,options:l,setCurComponent:n,isTree:r}=e,[s,o]=(0,i.useState)(!1),[d,c]=(0,i.useState)(null),[u]=eI.Z.useForm(),p=()=>{u.resetFields(),o(!1)};return(0,a.jsxs)("div",{children:[(null==l?void 0:l.length)===0?(0,a.jsx)("div",{style:{textAlign:"center"},children:"暂无数据"}):(0,a.jsx)(eq.Z,{treeData:l,blockNode:!0,showLine:r,titleRender:e=>(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,a.jsxs)("div",{children:[null==e?void 0:e.label,"(key: ",null==e?void 0:e.key,")"]}),(0,a.jsxs)(h.Z,{children:[r&&(0,a.jsx)(eJ.Z,{onClick:t=>{t.stopPropagation(),c(null==e?void 0:e.key),o(!0)}}),(0,a.jsx)(et.Z,{onClick:l=>{l.stopPropagation(),n(l=>{if(l){let a=function e(t,l){return t.filter(e=>e.key!==l).map(t=>({...t,children:t.children?e(t.children,l):[]}))}((null==l?void 0:l.props[t])||[],null==e?void 0:e.key);return{...l,props:{...l.props,[t]:a}}}return null})}})]})]}),defaultExpandAll:!0}),(0,a.jsx)(eD.ZP,{type:"link",size:"small",icon:(0,a.jsx)(eK.Z,{}),onClick:()=>{c(null),o(!0)},children:"添加"}),(0,a.jsx)(eU.Z,{title:"添加数据",open:s,onCancel:p,onOk:()=>{u.validateFields().then(e=>{let l={...e,key:e.value,children:[]};n(e=>{if(e){let a=function e(t,l,a){let i=(e,t)=>e.some(e=>e.key===t||e.children&&i(e.children,t));return i(t,a.key)?(eQ.ZP.error("key 已经存在，请重新输入"),t):null===l?[...t,a]:t.map(t=>t.key===l?{...t,children:[...t.children||[],a]}:t.children?{...t,children:e(t.children,l,a)}:t)}((null==e?void 0:e.props[t])||[],d,l);return{...e,props:{...e.props,[t]:a}}}return null}),p()})},centered:!0,children:(0,a.jsxs)(eI.Z,{form:u,children:[(0,a.jsx)(eI.Z.Item,{label:"label",name:"label",rules:[{required:!0,message:"请输入label"}],children:(0,a.jsx)(y.Z,{})}),(0,a.jsx)(eI.Z.Item,{label:"value",name:"value",rules:[{required:!0,message:"请输入value"}],children:(0,a.jsx)(y.Z,{})})]})})]})},e1=e=>{let{label:t,name:l,value:i,onChange:n}=e;return(0,a.jsx)(eI.Z.Item,{label:t,name:l,initialValue:i,children:(0,a.jsx)(y.Z,{onChange:e=>n(e.target.value),placeholder:"请输入"})})},e2=e=>{let{label:t,name:l,value:i,options:n,onChange:r}=e;return(0,a.jsx)(eI.Z.Item,{label:t,name:l,initialValue:i,children:(0,a.jsx)(eV.Z,{options:n,onChange:e=>r(e),placeholder:"请选择"})})},e4=e=>{let{label:t,name:l,value:i,onChange:n}=e;return(0,a.jsx)(eI.Z.Item,{label:t,name:l,initialValue:i,layout:"horizontal",children:(0,a.jsx)(eW.Z,{onChange:e=>n(e)})})},e6=e=>{let{label:t,name:l,value:i,options:n,onChange:r}=e;return(0,a.jsx)(eI.Z.Item,{label:t,name:l,initialValue:i,children:(0,a.jsx)(m.ZP.Group,{options:n,onChange:e=>r(e.target.value)})})},e5=e=>{let{label:t,name:l,value:i,onChange:n}=e;return(0,a.jsx)(eI.Z.Item,{label:t,name:l,initialValue:i,layout:"horizontal",children:(0,a.jsx)(eG.Z,{onChange:e=>n(e)})})},e3=(e,t,l,i)=>{let n;if("datasource"!==e.type&&"tree-datasource"!==e.type){var r;n=null==t?void 0:null===(r=t[e.attr])||void 0===r?void 0:r[e.name]}switch(e.type){case"input":return(0,a.jsx)(e1,{label:e.label,name:e.name,value:n,onChange:t=>l(e.attr,e.name,t)});case"select":return(0,a.jsx)(e2,{label:e.label,name:e.name,value:n,options:e.options,onChange:t=>l(e.attr,e.name,t)});case"switch":return(0,a.jsx)(e4,{label:e.label,name:e.name,value:n,onChange:t=>l(e.attr,e.name,t)});case"radio":return(0,a.jsx)(e6,{label:e.label,name:e.name,value:n,options:e.options,onChange:t=>l(e.attr,e.name,t)});case"input-number":return(0,a.jsx)(e5,{label:e.label,name:e.name,value:n,onChange:t=>l(e.attr,e.name,t)});case"tree-datasource":return(0,a.jsx)(e0,{name:null==e?void 0:e.name,options:null==t?void 0:t.props[null==e?void 0:e.name],setCurComponent:i,isTree:!0});case"datasource":return(0,a.jsx)(e0,{name:null==e?void 0:e.name,options:null==t?void 0:t.props[null==e?void 0:e.name],setCurComponent:i,isTree:!1});default:return null}},e8=e=>{let{curComponent:t,setCurComponent:l}=e;if(!t)return null;let[n]=eI.Z.useForm(),r=(0,i.useMemo)(()=>{var e;return(null===(e=ef[t.componentType])||void 0===e?void 0:e.configItems)||[]},[t]),s=(e,t,a)=>{l(l=>l?{...l,[e]:{...l[e],[t]:a}}:null)};return(0,a.jsx)("div",{style:{padding:12,boxSizing:"border-box"},children:(0,a.jsx)(eI.Z,{form:n,size:"small",layout:"vertical",children:r.map(e=>(0,a.jsx)("div",{children:e3(e,t,s,l)},e.name))})})},e7=()=>{let{gridCols:e,setGridCols:t,gridRowHeight:l,setGridRowHeight:i}=eE("low_code"),[n]=eI.Z.useForm();return(0,a.jsx)("div",{style:{padding:12,boxSizing:"border-box"},children:(0,a.jsxs)(eI.Z,{form:n,children:[(0,a.jsx)(eI.Z.Item,{label:"网格列数",name:"gridCols",initialValue:e,children:(0,a.jsx)(eG.Z,{size:"small",onChange:e=>{"number"==typeof e&&t(e)}})}),(0,a.jsx)(eI.Z.Item,{label:"网格行高",name:"gridRowHeight",initialValue:l,children:(0,a.jsx)(eG.Z,{size:"small",onChange:e=>{"number"==typeof e&&i(e)}})})]})})},e9=e=>{let{curComponent:t,setCurComponent:l}=e,i=[{key:"form",label:"组件配置",children:(0,a.jsx)(e8,{curComponent:t,setCurComponent:l})},{key:"chart",label:"整体配置",children:(0,a.jsx)(e7,{})}];return(0,a.jsx)("div",{className:eH,style:{width:260},children:(0,a.jsx)(eo.Z,{items:i})})};var te=l("4129"),tt=l("8501");l("2008"),l("6054");let tl=e=>{if(e){let t=getComputedStyle(e),l=parseFloat(t.marginTop);return l+parseFloat(t.marginBottom)}return 0};var ta=l("7618");let ti=e=>{let{resizeFn:t,containerRef:l,deptParams:a,wait:n=200}=e,{run:r}=(0,ta.Z)(t,{wait:n});return(0,i.useEffect)(()=>{let e=new ResizeObserver(()=>r()),t=new MutationObserver(r),a=l.current;return a&&(e.observe(a),t.observe(a,{childList:!0,subtree:!0})),r(),()=>{a&&(e.unobserve(a),t.disconnect())}},[...a,r]),{}},tn=e=>{let{autoFitContent:t,...l}=e,n=(0,i.useRef)(null);return t&&ti({resizeFn:()=>{if(t){let e=n.current;if(e){let t=e.querySelector(".ant-tabs-nav"),l=t?t.clientHeight+tl(t):0,a=e.clientHeight-l,i=e.querySelector(".ant-tabs-content");i&&(i.style.height=`${a}px`,i.style.overflow="auto")}}},containerRef:n,deptParams:[t]}),(0,a.jsx)("div",{ref:n,style:{width:"100%",height:"100%"},children:(0,a.jsx)(eo.Z,{...l})})},tr=[{name:"首页",path:"/",element:(0,a.jsx)("div",{children:"首页"})},{name:"canvas",path:"/canvas",element:(0,a.jsx)(()=>{let e=(0,i.useRef)(null),t=(0,i.useRef)(null),[l,n]=(0,i.useState)("rect"),[r,s]=(0,i.useState)("#1677ff"),[o,x]=(0,i.useState)([]),[v,f]=(0,i.useState)(null),[b,g]=(0,i.useState)(null),w=(e,t)=>{for(let l=0;l<o.length;l++)if(o[l].isInside(e,t))return o[l];return null};return(0,i.useEffect)(()=>{let a=e.current;if(!a)return;let i=a.getContext("2d");if(!!i)a.width=800*devicePixelRatio,a.height=500*devicePixelRatio,a.style.width="800px",a.style.height="500px",a.style.backgroundColor="#808080",a.onmousedown=function(e){let t=a.getBoundingClientRect(),n=e.clientX-t.left,s=e.clientY-t.top,o=w(n,s);if(o){let{startX:e,startY:l,endX:a,endY:i}=o;window.onmouseup=function(){window.onmousemove=null,window.onmouseup=null},window.onmousemove=function(r){let d=r.clientX-t.left-n,c=r.clientY-t.top-s;o.startX=e+d,o.endX=a+d,o.startY=l+c,o.endY=i+c}}else{let e=null;"rect"===l?e=new d(i,r,n,s):"round"===l?e=new c(i,r,n,s):"ellipse"===l&&(e=new u(i,r,n,s)),e&&x(t=>[...t,e]),window.onmouseup=function(){window.onmousemove=null,window.onmouseup=null},window.onmousemove=function(l){let a=l.clientX-t.left,i=l.clientY-t.top;e&&(e.endX=a,e.endY=i)}}},a.ondblclick=function(e){let l=a.getBoundingClientRect(),i=e.clientX-l.left,n=w(i,e.clientY-l.top);n&&(f(n),g({x:e.clientX,y:e.clientY,text:n.text}),setTimeout(()=>{var e;null===(e=t.current)||void 0===e||e.focus()},0))}},[l,r,o]),(0,i.useEffect)(()=>{!function t(){let l=e.current;if(!l)return;let a=l.getContext("2d");a&&l&&(a.clearRect(0,0,l.width,l.height),o.forEach(e=>e.draw(devicePixelRatio)),requestAnimationFrame(t))}()},[o]),(0,a.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,a.jsxs)(h.Z,{style:{marginBottom:6},children:[(0,a.jsx)(p.Z,{value:r,onChange:e=>{s(e.toRgbString())}}),(0,a.jsxs)(m.ZP.Group,{value:l,onChange:e=>n(e.target.value),children:[(0,a.jsx)(m.ZP,{value:"rect",children:"矩形"}),(0,a.jsx)(m.ZP,{value:"ellipse",children:"椭圆"}),(0,a.jsx)(m.ZP,{value:"round",children:"圆"})]})]}),(0,a.jsx)("canvas",{ref:e}),b&&(0,a.jsx)(y.Z,{ref:t,style:{position:"fixed",left:b.x,top:b.y,display:"block",width:200},defaultValue:b.text,onBlur:()=>{if(v){var e,l;v.text=(null===(l=t.current)||void 0===l?void 0:null===(e=l.input)||void 0===e?void 0:e.value)||"",g(null),f(null)}}})]})},{})},{name:"拖拽",path:"/drag",element:(0,a.jsx)(()=>{let[e,t]=(0,i.useState)([]),[l,n]=(0,i.useState)(null),[r,s]=(0,i.useState)({x:0,y:0,sizeX:5,sizeY:3,type:"new"}),[o,d]=(0,i.useState)({x:1,y:1});return(0,i.useEffect)(()=>{let e=()=>{let e=window.innerWidth-260,t=window.innerHeight,l=e/f.width;d({x:l,y:t/f.height})};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[]),(0,a.jsxs)("div",{className:x["big-box"],children:[(0,a.jsx)(I,{setShadowPosition:s,setComponentData:t}),(0,a.jsxs)("div",{className:x["panel-edit"],style:{width:"calc(100% - 260px)"},children:[(0,a.jsx)(A,{shadowPosition:r,scale:o,componentData:e}),(0,a.jsx)(L,{componentData:e,setComponentData:t,curComponent:l,setCurComponent:n,scale:o,setShadowPosition:s}),(0,a.jsx)(T,{scale:o})]})]})},{})},{name:"react-grid-layout",path:"/react-grid-layout",element:(0,a.jsx)(()=>{let[e,t]=(0,i.useState)(window.innerWidth),[l,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(null),o=()=>{n([{id:"a",x:0,y:0,w:4,h:9},{id:"b",x:4,y:0,w:4,h:9},{id:"c",x:8,y:0,w:4,h:9}].map(e=>({i:e.id,x:e.x,y:e.y,w:e.w,h:e.h,resizeHandles:[]})))};return(0,i.useEffect)(()=>{o();let e=()=>t(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsx)(N(),{className:"layout",layout:l,cols:12,rowHeight:30,width:e,onLayoutChange:e=>{n(e.map(e=>({i:e.i,x:e.x,y:e.y,w:e.w,h:e.h,resizeHandles:r===e.i?G:[]})))},draggableHandle:`.${R}`,children:l.map(e=>(0,a.jsx)("div",{style:{background:"#ccc"},onClick:()=>{s(e.i),n(t=>t.map(t=>t.i===e.i?{...t,resizeHandles:G}:t))},children:(0,a.jsxs)("div",{className:$,style:r===e.i?{outline:"1px solid #70c0ff"}:{},children:[(0,a.jsx)("div",{className:`${R} ${_}`}),(0,a.jsx)("div",{className:`${R} ${E}`}),(0,a.jsx)("div",{className:`${R} ${O}`}),(0,a.jsx)("div",{className:`${R} ${D}`}),(0,a.jsx)("div",{className:P,children:(0,a.jsx)(W,{id:e.i})})]})},e.i))})},{})},{name:"条件关系",path:"/condition-relation",element:(0,a.jsx)(()=>{let[e,t]=(0,i.useState)([]),[l,n]=(0,i.useState)("or"),r=(0,i.useMemo)(()=>{let t=e.length,l={x:0,y:0,child:e};return(l.y=Math.floor(U(l,0)/2),t)?K(l):""},[e]),s=(0,i.useMemo)(()=>{let t=e.length,l={x:0,y:0,child:e};return(l.y=Math.floor(U(l,0)/2),t)?ee(l):"M48 20 L68 20"},[e]);return(0,a.jsx)("div",{style:{height:"100%",width:"100%",justifyContent:"center",alignItems:"center",display:"flex",background:"#d3d3d3",padding:12,boxSizing:"border-box"},children:(0,a.jsxs)("div",{style:{width:850,background:"#fff",display:"flex",alignItems:"center",position:"relative"},children:[(0,a.jsx)(en,{x:0,relationList:e,logic:l,addCondReal:(e,l)=>{let a="condition"===e?{fieldId:"",value:"",enumValue:"",term:"",filterType:"logic",name:"",deType:"",key:(0,g.Z)()}:{child:[],logic:l,key:(0,g.Z)()};t(e=>[...e,a])},setRelationList:t,removeRelationList:e=>{t([])},setLogic:n}),(0,a.jsx)("svg",{width:"388",height:"100%",className:"real-line",children:(0,a.jsx)("path",{strokeLinejoin:"round",strokeLinecap:"round",d:r,fill:"none",stroke:"#CCCCCC",strokeWidth:"0.5"})}),(0,a.jsx)("svg",{width:"388",height:"100%",className:"dash-line",children:(0,a.jsx)("path",{strokeLinejoin:"round",strokeLinecap:"round",d:s,fill:"none",stroke:"#CCCCCC",strokeWidth:"0.5",strokeDasharray:"4,4"})})]})})},{})},{name:"两个图表的echarts",path:"/two-chart-echarts",element:(0,a.jsx)(()=>{let e=i.useRef(null),t={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},color:["#f8f106","#fe7576","#a9b0d3","#476fd4"],grid:[{x:"7%",y:"7%",height:"35%",left:"10%"},{x:"7%",y2:"7%",height:"35%",left:"10%",bottom:"15%"}],legend:{data:["蒸发量","降水量","平均温度","测试"]},xAxis:[{show:!1,type:"category",gridIndex:0,axisTick:{alignWithLabel:!0},axisLabel:{},data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},{type:"category",gridIndex:1,axisTick:{alignWithLabel:!0},axisLabel:{},data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}],yAxis:[{type:"value",gridIndex:1,name:"蒸发量",splitLine:{show:!1},nameLocation:"middle",nameTextStyle:{padding:25},position:"right",axisLine:{lineStyle:{}},axisLabel:{formatter:"{value}"}},{type:"value",gridIndex:1,nameLocation:"middle",name:"降水量",nameTextStyle:{padding:25},splitLine:{show:!1},position:"left",axisLine:{lineStyle:{}},axisLabel:{formatter:"{value}"}},{type:"value",gridIndex:0,name:"平均温度",nameTextStyle:{padding:25},position:"left",nameLocation:"middle",splitLine:{show:!1},axisLine:{lineStyle:{}},axisLabel:{formatter:"{value}",textStyle:{fontSize:12}}},{type:"value",gridIndex:0,name:"测试",nameTextStyle:{padding:25},nameLocation:"middle",position:"right",splitLine:{show:!1},axisLine:{lineStyle:{}},axisLabel:{formatter:"{value}",textStyle:{fontSize:12}}}],series:[{name:"蒸发量",type:"bar",xAxisIndex:0,yAxisIndex:2,data:[2,4.9,7,23.2,25.6,76.7,135.6,162.2,32.6,20,6.4,3.3]},{name:"降水量",type:"line",xAxisIndex:0,yAxisIndex:3,data:[2.6,5.9,9,26.4,28.7,70.7,175.6,182.2,48.7,18.8,6,2.3]},{name:"平均温度",type:"bar",xAxisIndex:1,yAxisIndex:0,data:[2,2.2,3.3,4.5,6.3,10.2,20.3,23.4,23,16.5,12,6.2]},{name:"测试",type:"line",xAxisIndex:1,yAxisIndex:1,data:[2,2.2,3.3,4.5,6.3,10.2,20.3,23.4,23,16.5,12,6.2]}]};return(0,i.useEffect)(()=>{e.current&&er.S1(e.current).setOption(t)},[]),(0,a.jsx)("div",{ref:e,style:{width:"100%",height:"100%"}})},{})},{name:"低代码",path:"/low-code",element:(0,a.jsx)(()=>{let{gridCols:e,gridRowHeight:t}=eE("low_code"),[l,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(null),[o]=eI.Z.useForm();return(0,i.useEffect)(()=>{r?n(e=>e.some(e=>e.id===r.id)?e.map(e=>e.id===r.id?{...r,i:r.id,resizeHandles:ev}:{...e,resizeHandles:[]}):[...e.map(e=>({...e,resizeHandles:[]})),{...r,i:r.id,resizeHandles:ev}]):n(e=>e.map(e=>({...e,resizeHandles:[]})))},[r]),(0,a.jsx)("div",{style:{width:"100%",height:"100%",display:"flex"},children:(0,a.jsxs)(te.ZP,{locale:tt.default,children:[(0,a.jsx)(eb,{handleComponentDragEnd:(l,a)=>{let i=window.innerWidth-520,n=Math.ceil((l.clientX-260)/i*e);if(n>0&&n<=e){var r,o;s({x:n,y:Math.ceil(l.clientY/t),w:6,h:3,id:(0,g.Z)(),componentCategory:a.componentCategory,componentType:a.value,type:a.type,resizeHandles:[],customStyle:{},props:(null===(r=ef[a.value])||void 0===r?void 0:r.props)||{},customAttr:(null===(o=ef[a.value])||void 0===o?void 0:o.customAttr)||{}})}}}),(0,a.jsx)(eB,{layout:l,setLayout:n,curComponent:r,setCurComponent:s,form:o}),(0,a.jsx)(e9,{curComponent:r,setCurComponent:s},null==r?void 0:r.id)]})})},{})},{name:"二次封装组件demo",path:"/demo-block",element:(0,a.jsx)(()=>{let e=Array(200).fill(1).map(e=>(0,a.jsx)("div",{style:{width:100,height:100,background:"#ccc"},children:e},e)),t=[{key:"1",label:"Tab 1",children:(0,a.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:10},children:e})},{key:"2",label:"Tab 2",children:"Content of Tab Pane 2"},{key:"3",label:"Tab 3",children:"Content of Tab Pane 3"}];return(0,a.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(tn,{items:t,style:{width:"100%",height:"100%"}})})},{})}];function ts(){var e,t;return e=(0,s.V$)(tr),(0,a.jsx)(eO,{children:e})}let to=document.getElementById("root");to&&n.createRoot(to).render((0,a.jsx)(i.StrictMode,{children:(0,a.jsx)(te.ZP,{locale:tt.default,theme:{token:{fontFamily:'"KoiFont","PingFang SC", "Microsoft YaHei", "Arial", sans-serif'}},children:(0,a.jsx)(()=>(0,a.jsx)(r.VK,{children:(0,a.jsx)(ts,{})}),{})})}))}},t={};function l(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,l),n.exports}l.m=e,l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};l.t=function(a,i){if(1&i&&(a=this(a)),8&i||"object"==typeof a&&a&&(4&i&&a.__esModule||16&i&&"function"==typeof a.then))return a;var n=Object.create(null);l.r(n);var r={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&a;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(function(e){r[e]=function(){return a[e]}});return r.default=function(){return a},l.d(n,r),n}})(),l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];l.O=function(t,a,i,n){if(a){n=n||0;for(var r=e.length;r>0&&e[r-1][2]>n;r--)e[r]=e[r-1];e[r]=[a,i,n];return}for(var s=1/0,r=0;r<e.length;r++){for(var a=e[r][0],i=e[r][1],n=e[r][2],o=!0,d=0;d<a.length;d++)(!1&n||s>=n)&&Object.keys(l.O).every(function(e){return l.O[e](a[d])})?a.splice(d--,1):(o=!1,n<s&&(s=n));if(o){e.splice(r--,1);var c=i();void 0!==c&&(t=c)}}return t}})(),l.rv=function(){return"1.0.14"},(()=>{var e={980:0};l.O.j=function(t){return 0===e[t]};var t=function(t,a){var i=a[0],n=a[1],r=a[2],s,o,d=0;if(i.some(function(t){return 0!==e[t]})){for(s in n)l.o(n,s)&&(l.m[s]=n[s]);if(r)var c=r(l)}for(t&&t(a);d<i.length;d++)o=i[d],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(c)},a=self.webpackChunkwuyi_demo1=self.webpackChunkwuyi_demo1||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),l.ruid="bundler=rspack@1.0.14",l.O(void 0,["361","118","95"],function(){return l("1117")});var a=l.O(void 0,["361","118","95"],function(){return l("5715")});a=l.O(a)})();