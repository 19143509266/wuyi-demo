(self.webpackChunk=self.webpackChunk||[]).push([[809],{30053:function(t,m,o){"use strict";o.r(m),o.d(m,{default:function(){return pe}});var b=o(48305),v=o.n(b),i=o(75271),P=o(15558),X=o.n(P),d={"big-box":"big-box___wVSaO","panel-edit":"panel-edit___cWnaq",shadow:"shadow___I_0Tf",slider:"slider___r7ptW",item:"item___SUTOR",outline:"outline___rbK8E",handle:"handle___qRG5L","handle-tl":"handle-tl___sffw5","handle-br":"handle-br___BSkNJ","handle-tr":"handle-tr___CzmFz","handle-bl":"handle-bl___nU3RM","handle-tm":"handle-tm___WwvPV","handle-bm":"handle-bm___eV31S","handle-ml":"handle-ml___uJsin","handle-mr":"handle-mr___d3pT0",move:"move___ZHHyo","move-top":"move-top___mDDB7","move-bottom":"move-bottom___wXKfG","move-left":"move-left____2vSL","move-right":"move-right___zQKPU"},c={x:36,y:18},p={width:1600,height:900},j=260,A=["tl","tm","tr","ml","mr","bl","bm","br"],$=o(59739),W=o(26068),a=o.n(W),f=function(n,e,s){if(n==="x")return e*s.x/c.x*p.width;if(n==="y")return e*s.y/c.y*p.height},U=function(n,e,s){return n==="x"?e/s.x/p.width*c.x:n==="y"?e/s.y/p.height*c.y:0},K=function(n,e){return n.x<e.x+e.sizeX&&n.x+n.sizeX>e.x&&n.y<e.y+e.sizeY&&n.y+n.sizeY>e.y},J=function(n,e){var s=!1;return e(function(l){var r=q(l,n);r.x=Math.min(Math.max(r.x,0),c.x-(r.sizeX||0)),r.y=Math.max(r.y,0);var x=l.map(function(u){if(u.id!==r.id&&K(r,u)){s=!0;var h=u.y;return r.y<=u.y&&(h+=r.sizeY-u.y),a()(a()({},u),{},{y:h})}return u});return x}),s},ee=function(n,e,s){e(function(l){return l.map(function(r){var x=r;if(r.y>0){var u=q(l,r);x=u}return r.id===(n==null?void 0:n.id)&&!s?n:x})})},q=function(n,e){var s=n.filter(function(l){return l.y<e.y&&l.x<e.x+e.sizeX&&l.x+l.sizeX>e.x&&l.id!==e.id}).reduce(function(l,r){return l===null||r.y>l.y?r:l},null);return s?s.x+s.sizeX<=e.x||e.x+e.sizeX<=s.x?a()(a()({},e),{},{y:s.y}):e.y<s.y+s.sizeY?a()(a()({},e),{},{y:e.y-s.sizeY}):a()(a()({},e),{},{y:s.y+s.sizeY}):a()(a()({},e),{},{y:0})},oe=function(n,e,s,l,r,x){var u=(0,i.useRef)(n);u.current=n;var h=null,S=(0,i.useCallback)(function(_,g){var I,M,w,R,H=_.clientX,N=_.clientY,T=((I=u.current)===null||I===void 0?void 0:I.sizeX)||0,E=((M=u.current)===null||M===void 0?void 0:M.sizeY)||0,y=((w=u.current)===null||w===void 0?void 0:w.x)||0,z=((R=u.current)===null||R===void 0?void 0:R.y)||0,D=function(Y){if(u.current){var k=Math.round(U("x",Y.clientX-H,r)),L=Math.round(U("y",Y.clientY-N,r)),G=T,Z=E,F=y,Q=z;switch(g){case"tl":G=T-k,Z=E-L,F=y+k,Q=z+L;break;case"tm":Z=E-L,Q=z+L;break;case"tr":G=T+k,Z=E-L,Q=z+L;break;case"ml":G=T-k,F=y+k;break;case"mr":G=T+k;break;case"bl":G=T-k,Z=E+L,F=y+k;break;case"bm":Z=E+L;break;case"br":G=T+k,Z=E+L;break;default:break}if(F+G>c.x){var te,re;F=c.x-(((te=u.current)===null||te===void 0?void 0:te.sizeX)||0),G=((re=u.current)===null||re===void 0?void 0:re.sizeX)||0}if(F<0){var ne;F=0,G=((ne=u.current)===null||ne===void 0?void 0:ne.sizeX)||0}if(Q<0){var ae;Q=0,Z=((ae=u.current)===null||ae===void 0?void 0:ae.sizeY)||0}var _e=a()(a()({},u.current),{},{sizeX:G,sizeY:Z,x:F,y:Q});h=_e,x(a()(a()({},h),{},{type:"drag"}));var we=J(h,l);we||(e(h),ee(u.current,l,!1))}},B=function V(){if(x({x:0,y:0,sizeX:0,sizeY:0,type:"new"}),h){var Y=q(s,h);Y.x=Math.min(Math.max(Y.x,0),c.x-(Y.sizeX||0)),Y.y=Math.max(Y.y,0),e(Y),l(function(k){return k.map(function(L){return L.id===(Y==null?void 0:Y.id)?Y:L})})}window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",V)};window.addEventListener("mousemove",D),window.addEventListener("mouseup",B)},[n,e,s,l,r]);return{handleResizeMouseDown:S}},ie=function(n,e,s,l,r,x){var u=(0,i.useRef)(n);u.current=n;var h=null,S=(0,i.useCallback)(function(_){var g,I,M=_.clientX,w=_.clientY,R=((g=u.current)===null||g===void 0?void 0:g.x)||0,H=((I=u.current)===null||I===void 0?void 0:I.y)||0,N=function(y){var z;if(u.current){var D=Math.round(U("x",y.clientX-M,r)),B=Math.round(U("y",y.clientY-w,r)),V=R+D,Y=H+B;V=Math.min(Math.max(V,0),c.x-(((z=u.current)===null||z===void 0?void 0:z.sizeX)||0)),Y=Math.max(Y,0);var k=a()(a()({},u.current),{},{x:V,y:Y});h=k,x(a()(a()({},h),{},{type:"drag"}));var L=J(h,l);L||(e(h),ee(u.current,l,!1))}},T=function E(){if(x({x:0,y:0,sizeX:0,sizeY:0,type:"new"}),h){var y=q(s,h);y.x=Math.min(Math.max(y.x,0),c.x-(y.sizeX||0)),y.y=Math.max(y.y,0),e(y),l(function(z){return z.map(function(D){return D.id===(y==null?void 0:y.id)?y:D})})}window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",E)};window.addEventListener("mousemove",N),window.addEventListener("mouseup",T)},[n,e,s,l,r]);return{handleMoveMouseDown:S}},se=function(n,e,s,l){var r=(0,i.useState)(0),x=v()(r,2),u=x[0],h=x[1],S=(0,i.useState)(0),_=v()(S,2),g=_[0],I=_[1],M=(0,i.useState)(1),w=v()(M,2),R=w[0],H=w[1],N=(0,i.useState)(1),T=v()(N,2),E=T[0],y=T[1];return(0,i.useEffect)(function(){var z=p.width,D=p.height,B=Math.round((n-j)/(z/c.x)),V=Math.round(e/(D/c.y)),Y=Math.round(s/z*c.x),k=Math.round(l/D*c.y);h(B),I(V),H(Y),y(k)},[n,e,s,l]),{matrixX:u,matrixY:g,sizeX:R,sizeY:E}},C=o(52676),ue=function(n){var e=n.setShadowPosition,s=n.setComponentData,l=200,r=150,x=(0,i.useState)({x:0,y:0}),u=v()(x,2),h=u[0],S=u[1],_=se(h.x,h.y,l,r),g=_.matrixX,I=_.matrixY,M=_.sizeX,w=_.sizeY,R=p.width/c.x,H=p.height/c.y,N=function(y){var z=y.clientX,D=y.clientY;z>0&&D>0&&S({x:z,y:D});var B=Math.round((z-j)/R),V=Math.round(D/H);e({x:B,y:V,sizeX:5,sizeY:3,type:"new"})},T=function(){var y=h.x,z=h.y;if(y>j&&z>0){var D={id:(0,$.Z)(),x:g,y:I,sizeX:M,sizeY:w};s(function(B){return[].concat(X()(B),[D])}),ee(D,s,!0)}};return(0,C.jsx)("div",{className:d.slider,style:{width:j},children:Array.from({length:3}).map(function(E,y){return(0,C.jsxs)("div",{className:d.item,draggable:!0,onDrag:N,onDragEnd:T,children:["item",y+1]},y)})})},le=ue,de=function(n){var e=n.componentData,s=n.setComponentData,l=n.curComponent,r=n.setCurComponent,x=n.scale,u=n.setShadowPosition,h=oe(l,r,e,s,x,u),S=h.handleResizeMouseDown,_=ie(l,r,e,s,x,u),g=_.handleMoveMouseDown,I=function(w){r(w)};return(0,C.jsx)("div",{style:{width:"100%",height:"100%",userSelect:"none"},children:e.map(function(M){return(0,C.jsxs)("div",{style:{width:f("x",M.sizeX,x),height:f("y",M.sizeY,x),background:"#fff000",transform:"translate(".concat(f("x",M.x,x),"px, ").concat(f("y",M.y,x),"px)"),position:"absolute",zIndex:999},onClick:function(){return I(M)},children:[M.id,l&&l.id===M.id?(0,C.jsxs)("div",{className:d.outline,children:[A.map(function(w){return(0,C.jsx)("div",{className:"".concat(d.handle," ").concat(d["handle-".concat(w)]),onMouseDown:function(H){return S(H,w)}},w)}),["top","bottom","left","right"].map(function(w){return(0,C.jsx)("div",{className:"".concat(d.move," ").concat(d["move-".concat(w)]),onMouseDown:function(H){return g(H)}},w)})]}):null]},M.id)})})},ve=de,ce=function(n){var e=n.shadowPosition,s=n.scale,l=n.componentData;if(e.x<0||e.y<0||e.x===0&&e.y===0)return null;var r=p.width/c.x,x=p.height/c.y,u=(0,i.useMemo)(function(){var h={id:"shadow",x:e.x,y:e.y,sizeX:e.sizeX,sizeY:e.sizeY},S=q(l,h);S.x=Math.min(Math.max(S.x,0),c.x-(S.sizeX||0)),S.y=Math.max(S.y,0);var _=S.x*r,g=S.y*x,I=S.sizeX*r,M=S.sizeY*x,w={transform:"translate(".concat(_*s.x,"px, ").concat(g*s.y,"px) rotate(0deg)"),width:I*s.x,height:M*s.y,transition:"0.1s",zIndex:10};return w},[e,r,x]);return(0,C.jsx)("div",{className:d.shadow,style:u})},xe=ce,fe=function(n){var e=n.scale,s=(0,i.useRef)(null);return(0,i.useEffect)(function(){var l=s.current;if(l){var r=l.getContext("2d");if(r){var x=p.width,u=p.height;l.width=x*e.x,l.height=u*e.y,r.strokeStyle="#e0e0e0",r.lineWidth=1;for(var h=x/c.x,S=u/c.y,_=0;_<=c.x;_++)r.beginPath(),r.moveTo(_*h*e.x,0),r.lineTo(_*h*e.x,u*e.y),r.stroke();for(var g=0;g<=c.y;g++)r.beginPath(),r.moveTo(0,g*S*e.y),r.lineTo(x*e.x,g*S*e.y),r.stroke()}}},[e]),(0,C.jsx)("canvas",{ref:s,style:{backgroundColor:"#f0f0f0",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",border:"1px solid #d0d0d0",borderRadius:"4px",overflow:"hidden",position:"absolute",top:0,left:0,boxSizing:"border-box",zIndex:1}})},he=fe,ye=function(){var n=(0,i.useState)([]),e=v()(n,2),s=e[0],l=e[1],r=(0,i.useState)(null),x=v()(r,2),u=x[0],h=x[1],S=(0,i.useState)({x:0,y:0,sizeX:5,sizeY:3,type:"new"}),_=v()(S,2),g=_[0],I=_[1],M=(0,i.useState)({x:1,y:1}),w=v()(M,2),R=w[0],H=w[1];return(0,i.useEffect)(function(){var N=function(){var E=window.innerWidth-j,y=window.innerHeight,z=E/p.width,D=y/p.height;H({x:z,y:D})};return window.addEventListener("resize",N),N(),function(){window.removeEventListener("resize",N)}},[]),(0,C.jsxs)("div",{className:d["big-box"],children:[(0,C.jsx)(le,{setShadowPosition:I,setComponentData:l}),(0,C.jsxs)("div",{className:d["panel-edit"],style:{width:"calc(100% - ".concat(j,"px)")},children:[(0,C.jsx)(xe,{shadowPosition:g,scale:R,componentData:s}),(0,C.jsx)(ve,{componentData:s,setComponentData:l,curComponent:u,setCurComponent:h,scale:R,setShadowPosition:I}),(0,C.jsx)(he,{scale:R})]})]})},pe=ye},38193:function(t,m,o){"use strict";var b;var v=o(75271),i=Symbol.for("react.element"),P=Symbol.for("react.fragment"),X=Object.prototype.hasOwnProperty,d=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function p(j,A,$){var W,a={},f=null,U=null;$!==void 0&&(f=""+$),A.key!==void 0&&(f=""+A.key),A.ref!==void 0&&(U=A.ref);for(W in A)X.call(A,W)&&!c.hasOwnProperty(W)&&(a[W]=A[W]);if(j&&j.defaultProps)for(W in A=j.defaultProps,A)a[W]===void 0&&(a[W]=A[W]);return{$$typeof:i,type:j,key:f,ref:U,props:a,_owner:d.current}}b=P,m.jsx=p,m.jsxs=p},52676:function(t,m,o){"use strict";t.exports=o(38193)},59739:function(t,m,o){"use strict";o.d(m,{Z:function(){return W}});var b=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),v={randomUUID:b},i,P=new Uint8Array(16);function X(){if(!i&&(i=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(P)}for(var d=[],c=0;c<256;++c)d.push((c+256).toString(16).slice(1));function p(a,f=0){return(d[a[f+0]]+d[a[f+1]]+d[a[f+2]]+d[a[f+3]]+"-"+d[a[f+4]]+d[a[f+5]]+"-"+d[a[f+6]]+d[a[f+7]]+"-"+d[a[f+8]]+d[a[f+9]]+"-"+d[a[f+10]]+d[a[f+11]]+d[a[f+12]]+d[a[f+13]]+d[a[f+14]]+d[a[f+15]]).toLowerCase()}function j(a,f=0){var U=p(a,f);if(!validate(U))throw TypeError("Stringified UUID is invalid");return U}var A=null;function $(a,f,U){if(v.randomUUID&&!f&&!a)return v.randomUUID();a=a||{};var K=a.random||(a.rng||X)();if(K[6]=K[6]&15|64,K[8]=K[8]&63|128,f){U=U||0;for(var J=0;J<16;++J)f[U+J]=K[J];return f}return p(K)}var W=$},78770:function(t){function m(o,b){(b==null||b>o.length)&&(b=o.length);for(var v=0,i=new Array(b);v<b;v++)i[v]=o[v];return i}t.exports=m,t.exports.__esModule=!0,t.exports.default=t.exports},50040:function(t){function m(o){if(Array.isArray(o))return o}t.exports=m,t.exports.__esModule=!0,t.exports.default=t.exports},38498:function(t,m,o){var b=o(78770);function v(i){if(Array.isArray(i))return b(i)}t.exports=v,t.exports.__esModule=!0,t.exports.default=t.exports},20698:function(t){function m(o){if(typeof Symbol!="undefined"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}t.exports=m,t.exports.__esModule=!0,t.exports.default=t.exports},44222:function(t){function m(o,b){var v=o==null?null:typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(v!=null){var i,P,X,d,c=[],p=!0,j=!1;try{if(X=(v=v.call(o)).next,b===0){if(Object(v)!==v)return;p=!1}else for(;!(p=(i=X.call(v)).done)&&(c.push(i.value),c.length!==b);p=!0);}catch(A){j=!0,P=A}finally{try{if(!p&&v.return!=null&&(d=v.return(),Object(d)!==d))return}finally{if(j)throw P}}return c}}t.exports=m,t.exports.__esModule=!0,t.exports.default=t.exports},44804:function(t){function m(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=m,t.exports.__esModule=!0,t.exports.default=t.exports},91162:function(t){function m(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=m,t.exports.__esModule=!0,t.exports.default=t.exports},48305:function(t,m,o){var b=o(50040),v=o(44222),i=o(31479),P=o(44804);function X(d,c){return b(d)||v(d,c)||i(d,c)||P()}t.exports=X,t.exports.__esModule=!0,t.exports.default=t.exports},15558:function(t,m,o){var b=o(38498),v=o(20698),i=o(31479),P=o(91162);function X(d){return b(d)||v(d)||i(d)||P()}t.exports=X,t.exports.__esModule=!0,t.exports.default=t.exports},31479:function(t,m,o){var b=o(78770);function v(i,P){if(i){if(typeof i=="string")return b(i,P);var X=Object.prototype.toString.call(i).slice(8,-1);if(X==="Object"&&i.constructor&&(X=i.constructor.name),X==="Map"||X==="Set")return Array.from(i);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return b(i,P)}}t.exports=v,t.exports.__esModule=!0,t.exports.default=t.exports}}]);
