(self.webpackChunk=self.webpackChunk||[]).push([[809],{44046:function(t,w,a){"use strict";a.r(w),a.d(w,{default:function(){return pe}});var b=a(48305),c=a.n(b),o=a(75271),j=a(15558),D=a.n(j),d={"big-box":"big-box___wVSaO","panel-edit":"panel-edit___cWnaq",shadow:"shadow___I_0Tf",slider:"slider___r7ptW",item:"item___SUTOR",outline:"outline___rbK8E",handle:"handle___qRG5L","handle-tl":"handle-tl___sffw5","handle-br":"handle-br___BSkNJ","handle-tr":"handle-tr___CzmFz","handle-bl":"handle-bl___nU3RM","handle-tm":"handle-tm___WwvPV","handle-bm":"handle-bm___eV31S","handle-ml":"handle-ml___uJsin","handle-mr":"handle-mr___d3pT0",move:"move___ZHHyo","move-top":"move-top___mDDB7","move-bottom":"move-bottom___wXKfG","move-left":"move-left____2vSL","move-right":"move-right___zQKPU"},v={x:36,y:18},p={width:1600,height:900},g=260,J=["tl","tm","tr","ml","mr","bl","bm","br"],k=a(59739),B=a(26068),i=a.n(B),h=function(n,e,s){if(n==="x")return e*s.x/v.x*p.width;if(n==="y")return e*s.y/v.y*p.height},H=function(n,e,s){return n==="x"?e/s.x/p.width*v.x:n==="y"?e/s.y/p.height*v.y:0},F=function(n,e){return n.x<e.x+e.sizeX&&n.x+n.sizeX>e.x&&n.y<e.y+e.sizeY&&n.y+n.sizeY>e.y},$=function(n,e){var s=!1;return e(function(l){var r=q(l,n);r.x=Math.min(Math.max(r.x,0),v.x-(r.sizeX||0)),r.y=Math.max(r.y,0);var x=l.map(function(u){if(u.id!==r.id&&F(r,u)){s=!0;var f=u.y;return r.y<=u.y&&(f+=r.sizeY-u.y),i()(i()({},u),{},{y:f})}return u});return x}),s},ee=function(n,e,s){e(function(l){return l.map(function(r){var x=r;if(r.y>0){var u=q(l,r);x=u}return r.id===(n==null?void 0:n.id)&&!s?n:x})})},q=function(n,e){var s=n.filter(function(l){return l.y<e.y&&l.x<e.x+e.sizeX&&l.x+l.sizeX>e.x&&l.id!==e.id}).reduce(function(l,r){return l===null||r.y>l.y?r:l},null);return s?s.x+s.sizeX<=e.x||e.x+e.sizeX<=s.x?i()(i()({},e),{},{y:s.y}):e.y<s.y+s.sizeY?i()(i()({},e),{},{y:e.y-s.sizeY}):i()(i()({},e),{},{y:s.y+s.sizeY}):i()(i()({},e),{},{y:0})},oe=function(n,e,s,l,r,x){var u=(0,o.useRef)(n);u.current=n;var f=null,S=(0,o.useCallback)(function(m,X){var E,M,_,C,W=m.clientX,O=m.clientY,R=((E=u.current)===null||E===void 0?void 0:E.sizeX)||0,P=((M=u.current)===null||M===void 0?void 0:M.sizeY)||0,y=((_=u.current)===null||_===void 0?void 0:_.x)||0,z=((C=u.current)===null||C===void 0?void 0:C.y)||0,Y=function(I){if(u.current){var T=Math.round(H("x",I.clientX-W,r)),U=Math.round(H("y",I.clientY-O,r)),V=R,K=P,Z=y,Q=z;switch(X){case"tl":V=R-T,K=P-U,Z=y+T,Q=z+U;break;case"tm":K=P-U,Q=z+U;break;case"tr":V=R+T,K=P-U,Q=z+U;break;case"ml":V=R-T,Z=y+T;break;case"mr":V=R+T;break;case"bl":V=R-T,K=P+U,Z=y+T;break;case"bm":K=P+U;break;case"br":V=R+T,K=P+U;break;default:break}if(Z+V>v.x){var te,re;Z=v.x-(((te=u.current)===null||te===void 0?void 0:te.sizeX)||0),V=((re=u.current)===null||re===void 0?void 0:re.sizeX)||0}if(Z<0){var ne;Z=0,V=((ne=u.current)===null||ne===void 0?void 0:ne.sizeX)||0}if(Q<0){var ae;Q=0,K=((ae=u.current)===null||ae===void 0?void 0:ae.sizeY)||0}var we=i()(i()({},u.current),{},{sizeX:V,sizeY:K,x:Z,y:Q});f=we,x(i()(i()({},f),{},{type:"drag"}));var me=$(f,l);me||(e(f),ee(u.current,l,!1))}},G=function N(){if(x({x:0,y:0,sizeX:0,sizeY:0,type:"new"}),f){var I=q(s,f);I.x=Math.min(Math.max(I.x,0),v.x-(I.sizeX||0)),I.y=Math.max(I.y,0),e(I),l(function(T){return T.map(function(U){return U.id===(I==null?void 0:I.id)?I:U})})}window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",N)};window.addEventListener("mousemove",Y),window.addEventListener("mouseup",G)},[n,e,s,l,r]);return{handleResizeMouseDown:S}},ie=function(n,e,s,l,r,x){var u=(0,o.useRef)(n);u.current=n;var f=null,S=(0,o.useCallback)(function(m){var X,E,M=m.clientX,_=m.clientY,C=((X=u.current)===null||X===void 0?void 0:X.x)||0,W=((E=u.current)===null||E===void 0?void 0:E.y)||0,O=function(y){var z;if(u.current){var Y=Math.round(H("x",y.clientX-M,r)),G=Math.round(H("y",y.clientY-_,r)),N=C+Y,I=W+G;N=Math.min(Math.max(N,0),v.x-(((z=u.current)===null||z===void 0?void 0:z.sizeX)||0)),I=Math.max(I,0);var T=i()(i()({},u.current),{},{x:N,y:I});f=T,x(i()(i()({},f),{},{type:"drag"}));var U=$(f,l);U||(e(f),ee(u.current,l,!1))}},R=function P(){if(x({x:0,y:0,sizeX:0,sizeY:0,type:"new"}),f){var y=q(s,f);y.x=Math.min(Math.max(y.x,0),v.x-(y.sizeX||0)),y.y=Math.max(y.y,0),e(y),l(function(z){return z.map(function(Y){return Y.id===(y==null?void 0:y.id)?y:Y})})}window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",P)};window.addEventListener("mousemove",O),window.addEventListener("mouseup",R)},[n,e,s,l,r]);return{handleMoveMouseDown:S}},se=function(n,e,s,l){var r=(0,o.useState)(0),x=c()(r,2),u=x[0],f=x[1],S=(0,o.useState)(0),m=c()(S,2),X=m[0],E=m[1],M=(0,o.useState)(1),_=c()(M,2),C=_[0],W=_[1],O=(0,o.useState)(1),R=c()(O,2),P=R[0],y=R[1];return(0,o.useEffect)(function(){var z=p.width,Y=p.height,G=Math.round((n-g)/(z/v.x)),N=Math.round(e/(Y/v.y)),I=Math.round(s/z*v.x),T=Math.round(l/Y*v.y);f(G),E(N),W(I),y(T)},[n,e,s,l]),{matrixX:u,matrixY:X,sizeX:C,sizeY:P}},A=a(52676),ue=function(n){var e=n.setShadowPosition,s=n.setComponentData,l=200,r=150,x=(0,o.useState)({x:0,y:0}),u=c()(x,2),f=u[0],S=u[1],m=se(f.x,f.y,l,r),X=m.matrixX,E=m.matrixY,M=m.sizeX,_=m.sizeY,C=p.width/v.x,W=p.height/v.y,O=function(y){var z=y.clientX,Y=y.clientY;z>0&&Y>0&&S({x:z,y:Y});var G=Math.round((z-g)/C),N=Math.round(Y/W);e({x:G,y:N,sizeX:5,sizeY:3,type:"new"})},R=function(){var y=f.x,z=f.y;if(y>g&&z>0){var Y={id:(0,k.Z)(),x:X,y:E,sizeX:M,sizeY:_};s(function(G){return[].concat(D()(G),[Y])}),ee(Y,s,!0)}};return(0,A.jsx)("div",{className:d.slider,style:{width:g},children:Array.from({length:3}).map(function(P,y){return(0,A.jsxs)("div",{className:d.item,draggable:!0,onDrag:O,onDragEnd:R,children:["item",y+1]},y)})})},le=ue,de=function(n){var e=n.componentData,s=n.setComponentData,l=n.curComponent,r=n.setCurComponent,x=n.scale,u=n.setShadowPosition,f=oe(l,r,e,s,x,u),S=f.handleResizeMouseDown,m=ie(l,r,e,s,x,u),X=m.handleMoveMouseDown,E=function(_){r(_)};return(0,A.jsx)("div",{style:{width:"100%",height:"100%",userSelect:"none"},children:e.map(function(M){return(0,A.jsxs)("div",{style:{width:h("x",M.sizeX,x),height:h("y",M.sizeY,x),background:"#fff000",transform:"translate(".concat(h("x",M.x,x),"px, ").concat(h("y",M.y,x),"px)"),position:"absolute",zIndex:999},onClick:function(){return E(M)},children:[M.id,l&&l.id===M.id?(0,A.jsxs)("div",{className:d.outline,children:[J.map(function(_){return(0,A.jsx)("div",{className:"".concat(d.handle," ").concat(d["handle-".concat(_)]),onMouseDown:function(W){return S(W,_)}},_)}),["top","bottom","left","right"].map(function(_){return(0,A.jsx)("div",{className:"".concat(d.move," ").concat(d["move-".concat(_)]),onMouseDown:function(W){return X(W)}},_)})]}):null]},M.id)})})},ve=de,ce=function(n){var e=n.shadowPosition,s=n.scale,l=n.componentData;if(e.x<0||e.y<0||e.x===0&&e.y===0)return null;var r=p.width/v.x,x=p.height/v.y,u=(0,o.useMemo)(function(){var f={id:"shadow",x:e.x,y:e.y,sizeX:e.sizeX,sizeY:e.sizeY},S=q(l,f);S.x=Math.min(Math.max(S.x,0),v.x-(S.sizeX||0)),S.y=Math.max(S.y,0);var m=S.x*r,X=S.y*x,E=S.sizeX*r,M=S.sizeY*x,_={transform:"translate(".concat(m*s.x,"px, ").concat(X*s.y,"px) rotate(0deg)"),width:E*s.x,height:M*s.y,transition:"0.1s",zIndex:10};return _},[e,r,x]);return(0,A.jsx)("div",{className:d.shadow,style:u})},xe=ce,fe=function(n){var e=n.scale,s=(0,o.useRef)(null);return(0,o.useEffect)(function(){var l=s.current;if(l){var r=l.getContext("2d");if(r){var x=p.width,u=p.height;l.width=x*e.x,l.height=u*e.y,r.strokeStyle="#e0e0e0",r.lineWidth=1;for(var f=x/v.x,S=u/v.y,m=0;m<=v.x;m++)r.beginPath(),r.moveTo(m*f*e.x,0),r.lineTo(m*f*e.x,u*e.y),r.stroke();for(var X=0;X<=v.y;X++)r.beginPath(),r.moveTo(0,X*S*e.y),r.lineTo(x*e.x,X*S*e.y),r.stroke()}}},[e]),(0,A.jsx)("canvas",{ref:s,style:{backgroundColor:"#f0f0f0",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",border:"1px solid #d0d0d0",borderRadius:"4px",overflow:"hidden",position:"absolute",top:0,left:0,boxSizing:"border-box",zIndex:1}})},he=fe,ye=function(){var n=(0,o.useState)([]),e=c()(n,2),s=e[0],l=e[1],r=(0,o.useState)(null),x=c()(r,2),u=x[0],f=x[1],S=(0,o.useState)({x:0,y:0,sizeX:5,sizeY:3,type:"new"}),m=c()(S,2),X=m[0],E=m[1],M=(0,o.useState)({x:1,y:1}),_=c()(M,2),C=_[0],W=_[1];return(0,o.useEffect)(function(){var O=function(){var P=window.innerWidth-g,y=window.innerHeight,z=P/p.width,Y=y/p.height;W({x:z,y:Y})};return window.addEventListener("resize",O),O(),function(){window.removeEventListener("resize",O)}},[]),(0,A.jsxs)("div",{className:d["big-box"],children:[(0,A.jsx)(le,{setShadowPosition:E,setComponentData:l}),(0,A.jsxs)("div",{className:d["panel-edit"],style:{width:"calc(100% - ".concat(g,"px)")},children:[(0,A.jsx)(xe,{shadowPosition:X,scale:C,componentData:s}),(0,A.jsx)(ve,{componentData:s,setComponentData:l,curComponent:u,setCurComponent:f,scale:C,setShadowPosition:E}),(0,A.jsx)(he,{scale:C})]})]})},pe=ye},38193:function(t,w,a){"use strict";var b=a(75271),c=Symbol.for("react.element"),o=Symbol.for("react.fragment"),j=Object.prototype.hasOwnProperty,D=b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function v(p,g,J){var k,B={},i=null,h=null;J!==void 0&&(i=""+J),g.key!==void 0&&(i=""+g.key),g.ref!==void 0&&(h=g.ref);for(k in g)j.call(g,k)&&!d.hasOwnProperty(k)&&(B[k]=g[k]);if(p&&p.defaultProps)for(k in g=p.defaultProps,g)B[k]===void 0&&(B[k]=g[k]);return{$$typeof:c,type:p,key:i,ref:h,props:B,_owner:D.current}}w.Fragment=o,w.jsx=v,w.jsxs=v},52676:function(t,w,a){"use strict";t.exports=a(38193)},59739:function(t,w,a){"use strict";a.d(w,{Z:function(){return B}});var b=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),c={randomUUID:b},o,j=new Uint8Array(16);function D(){if(!o&&(o=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(j)}for(var d=[],v=0;v<256;++v)d.push((v+256).toString(16).slice(1));function p(i,h=0){return(d[i[h+0]]+d[i[h+1]]+d[i[h+2]]+d[i[h+3]]+"-"+d[i[h+4]]+d[i[h+5]]+"-"+d[i[h+6]]+d[i[h+7]]+"-"+d[i[h+8]]+d[i[h+9]]+"-"+d[i[h+10]]+d[i[h+11]]+d[i[h+12]]+d[i[h+13]]+d[i[h+14]]+d[i[h+15]]).toLowerCase()}function g(i,h=0){var H=p(i,h);if(!validate(H))throw TypeError("Stringified UUID is invalid");return H}var J=null;function k(i,h,H){if(c.randomUUID&&!h&&!i)return c.randomUUID();i=i||{};var F=i.random||(i.rng||D)();if(F[6]=F[6]&15|64,F[8]=F[8]&63|128,h){H=H||0;for(var $=0;$<16;++$)h[H+$]=F[$];return h}return p(F)}var B=k},78770:function(t){function w(a,b){(b==null||b>a.length)&&(b=a.length);for(var c=0,o=new Array(b);c<b;c++)o[c]=a[c];return o}t.exports=w,t.exports.__esModule=!0,t.exports.default=t.exports},50040:function(t){function w(a){if(Array.isArray(a))return a}t.exports=w,t.exports.__esModule=!0,t.exports.default=t.exports},38498:function(t,w,a){var b=a(78770);function c(o){if(Array.isArray(o))return b(o)}t.exports=c,t.exports.__esModule=!0,t.exports.default=t.exports},20698:function(t){function w(a){if(typeof Symbol!="undefined"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}t.exports=w,t.exports.__esModule=!0,t.exports.default=t.exports},44222:function(t){function w(a,b){var c=a==null?null:typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(c!=null){var o,j,D,d,v=[],p=!0,g=!1;try{if(D=(c=c.call(a)).next,b===0){if(Object(c)!==c)return;p=!1}else for(;!(p=(o=D.call(c)).done)&&(v.push(o.value),v.length!==b);p=!0);}catch(J){g=!0,j=J}finally{try{if(!p&&c.return!=null&&(d=c.return(),Object(d)!==d))return}finally{if(g)throw j}}return v}}t.exports=w,t.exports.__esModule=!0,t.exports.default=t.exports},44804:function(t){function w(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=w,t.exports.__esModule=!0,t.exports.default=t.exports},91162:function(t){function w(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=w,t.exports.__esModule=!0,t.exports.default=t.exports},48305:function(t,w,a){var b=a(50040),c=a(44222),o=a(31479),j=a(44804);function D(d,v){return b(d)||c(d,v)||o(d,v)||j()}t.exports=D,t.exports.__esModule=!0,t.exports.default=t.exports},15558:function(t,w,a){var b=a(38498),c=a(20698),o=a(31479),j=a(91162);function D(d){return b(d)||c(d)||o(d)||j()}t.exports=D,t.exports.__esModule=!0,t.exports.default=t.exports},31479:function(t,w,a){var b=a(78770);function c(o,j){if(o){if(typeof o=="string")return b(o,j);var D=Object.prototype.toString.call(o).slice(8,-1);if(D==="Object"&&o.constructor&&(D=o.constructor.name),D==="Map"||D==="Set")return Array.from(o);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return b(o,j)}}t.exports=c,t.exports.__esModule=!0,t.exports.default=t.exports}}]);
